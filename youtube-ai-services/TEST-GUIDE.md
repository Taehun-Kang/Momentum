# 🧪 YouTube AI Services 테스트 가이드

## 📋 **준비 사항**

### 1. 환경 설정

프로젝트 루트에 `.env` 파일을 생성하고 필요한 API 키를 설정하세요:

```bash
# 필수: YouTube Data API v3 키
YOUTUBE_API_KEY=your_youtube_api_key_here

# 선택적: SerpAPI 키 (구글 트렌드용)
SERP_API_KEY=your_serp_api_key_here

# 선택적: Bright Data 설정 (웹 스크래핑용)
BRIGHT_DATA_API_KEY=your_bright_data_key_here
BRIGHT_DATA_ENDPOINT=https://api.bright-data.com/scrape

# 선택적: Claude AI 키 (향후 AI 기능용)
ANTHROPIC_API_KEY=your_claude_api_key_here
```

### 2. 의존성 설치

```bash
npm install
```

## 🚀 **테스트 실행 방법**

### 방법 1: 웹 인터페이스 테스트 (권장)

```bash
# 테스트 서버 시작
npm run server

# 또는 개발 모드 (자동 재시작)
npm run server:dev
```

그 다음 브라우저에서 접속:

- **테스트 URL**: http://localhost:3000
- **API 문서**: http://localhost:3000/api/config/status

### 방법 2: 커맨드라인 테스트

```bash
# 기본 예제 실행
npm run example

# 설정 상태 확인
npm run config

# 헬스 체크
npm run health
```

## 🎯 **테스트 시나리오**

### 📋 **1단계: 시스템 상태 확인**

웹 페이지 접속 후 상단의 "시스템 상태" 섹션을 확인하세요:

- ✅ **설정 검증**: API 키가 올바르게 설정되었는지 확인
- ✅ **기능 상태**: 각 모듈이 사용 가능한지 확인
- 🔧 **상태 확인**: 실시간 상태 업데이트
- 🏥 **헬스 체크**: 전체 서비스 건강 상태

### 📋 **2단계: YouTube 검색 기능 테스트**

#### 기본 검색 테스트

1. 검색 키워드에 "먹방" 입력
2. 최대 결과 수를 5로 설정
3. "원시 YouTube 검색" 버튼 클릭
4. 결과 확인 (5개 영상 정보)

#### 2단계 필터링 테스트

1. 위 검색 완료 후
2. "영상 필터링" 버튼 클릭
3. 재생 가능한 영상만 필터링된 결과 확인

#### 통합 검색 테스트

1. "통합 영상 검색" 버튼 클릭
2. search.list + videos.list + 필터링이 자동으로 실행됨
3. 최종 재생 가능한 영상 목록 확인

#### 스마트 검색 테스트

1. "스마트 검색" 버튼 클릭
2. 키워드 확장 + 관련 검색어까지 포함된 결과 확인

### 📋 **3단계: 트렌드 분석 기능 테스트**

각 트렌드 소스별로 테스트:

#### 통합 트렌딩 키워드

- 모든 소스(구글, 네이트, 줌)에서 수집한 트렌드 통합

#### 구글 트렌드

- SerpAPI를 통한 한국 구글 트렌드 수집

#### 네이트 실시간 검색어

- Bright Data를 통한 네이트 스크래핑

#### 줌 AI 이슈 트렌드

- Bright Data를 통한 줌 스크래핑

### 📋 **4단계: 통합 워크플로우 테스트**

#### 트렌딩 Shorts

1. "트렌딩 Shorts" 버튼 클릭
2. 실시간 트렌드 키워드 기반 영상 검색 실행
3. 재생 가능한 Shorts 영상 목록 확인

#### 오늘의 추천

1. "오늘의 추천" 버튼 클릭
2. 카테고리별 추천 영상 확인

### 📋 **5단계: 프리셋 기능 테스트**

각 카테고리별 영상 수집 테스트:

- 🍜 **먹방 영상**
- 📱 **브이로그**
- 🎵 **음악 Shorts**
- 🎭 **코미디 Shorts**

## 🔍 **예상 결과**

### ✅ 성공 시나리오

```
시스템 상태: ✅ 모든 기능 사용 가능
YouTube 검색: ✅ 5개 영상 검색됨, 필터링 성공률 70%+
트렌드 수집: ✅ 각 소스별 10개 키워드 수집
워크플로우: ✅ 20개 Shorts 영상 수집
프리셋: ✅ 각 카테고리별 15개 영상 수집
```

### ⚠️ 부분 성공 시나리오

```
시스템 상태: ⚠️ 일부 API 키 없음 (YouTube만 동작)
YouTube 검색: ✅ 기본 검색 가능
트렌드 수집: ❌ API 키 없음으로 폴백 데이터 사용
워크플로우: ✅ 기본 키워드로 검색
프리셋: ✅ 정상 동작
```

### ❌ 실패 시나리오

```
시스템 상태: ❌ YouTube API 키 없음
에러 메시지: "필수 API 키가 없습니다: youtubeApiKey"
해결 방법: .env 파일에 YOUTUBE_API_KEY 설정
```

## 🚨 **문제 해결**

### 1. API 키 관련 문제

```bash
# .env 파일 확인
cat .env

# 환경변수 로드 확인
node -e "require('dotenv').config(); console.log(process.env.YOUTUBE_API_KEY)"
```

### 2. 의존성 문제

```bash
# 의존성 재설치
rm -rf node_modules package-lock.json
npm install
```

### 3. 포트 충돌

```bash
# 다른 포트로 실행
PORT=3001 npm run server
```

### 4. 네트워크 문제

- YouTube API 할당량 확인
- 방화벽 설정 확인
- 인터넷 연결 상태 확인

## 📊 **성능 지표 확인**

테스트 중 다음 지표들을 모니터링하세요:

### API 사용량

- **YouTube API**: 일일 10,000 units 한도
- **검색 1회**: ~107 units (search.list 100 + videos.list 7)
- **목표 사용률**: < 80%

### 필터링 성공률

- **목표**: > 70%
- **실제**: 재생 가능한 영상 비율
- **개선 방법**: 검색 키워드 최적화

### 응답 시간

- **YouTube 검색**: < 2초
- **트렌드 수집**: < 5초
- **전체 워크플로우**: < 10초

### 캐시 효율

- **적중률**: > 80%
- **메모리 사용량**: < 100MB
- **TTL 적정성**: 검증 필요

## 🎯 **테스트 완료 체크리스트**

- [ ] 시스템 상태 확인 완료
- [ ] YouTube 검색 기능 테스트 완료
- [ ] 2단계 필터링 동작 확인
- [ ] 트렌드 수집 기능 테스트 완료
- [ ] 통합 워크플로우 테스트 완료
- [ ] 프리셋 기능 테스트 완료
- [ ] 에러 처리 확인 완료
- [ ] 성능 지표 확인 완료
- [ ] 캐시 동작 확인 완료

## 🔄 **다음 단계**

테스트 완료 후:

1. **이슈 리포트**: 발견된 문제점 정리
2. **성능 개선**: 병목 지점 최적화
3. **기능 추가**: 누락된 기능 구현
4. **문서 업데이트**: 사용법 가이드 보완
5. **통합 준비**: 메인 프로젝트 연동

---

**⚡ 빠른 시작**: `npm install && npm run server` → http://localhost:3000
