/**
 * ğŸ“ Input - í…ìŠ¤íŠ¸ ì…ë ¥ ì»´í¬ë„ŒíŠ¸ CSS
 * 
 * 3ê°€ì§€ variant ì§€ì›, ê¸€ë˜ìŠ¤ëª¨í”¼ì¦˜ ë””ìì¸
 * mood select/topic selectì™€ ì™„ë²½í•œ ì¼ê´€ì„±
 */

/* ========================================
   ê¸°ë³¸ Input ì»¨í…Œì´ë„ˆ
======================================== */

.input-container {
  position: relative;
  width: 100%;
  font-family: -apple-system, BlinkMacSystemFont, 'Noto Sans KR', system-ui, sans-serif;
}

.input-wrapper {
  position: relative;
  display: flex;
  align-items: center;
  background: var(--glass-bg-card, rgba(255, 255, 255, 0.1));
  backdrop-filter: blur(20px);
  -webkit-backdrop-filter: blur(20px);
  border: 1px solid var(--glass-border-dark, rgba(255, 255, 255, 0.2));
  border-radius: 20px; /* selection-cardì™€ ë™ì¼í•˜ê²Œ ìˆ˜ì • */
  padding: 12px 16px;
  transition: all 0.25s cubic-bezier(0.4, 0, 0.2, 1); /* selection-cardì™€ ë™ì¼í•˜ê²Œ ìˆ˜ì • */
  overflow: hidden;
  box-shadow: 0 4px 20px rgba(0, 0, 0, 0.08);
}

/* ========================================
   í¬ì»¤ìŠ¤ ë° ìƒíƒœ ìŠ¤íƒ€ì¼
======================================== */

.input-container--focused .input-wrapper {
  border-color: rgba(154, 120, 219, 0.3); /* selection-card í¬ì»¤ìŠ¤ì™€ ë™ì¼ */
  box-shadow: 
    0 4px 20px rgba(154, 120, 219, 0.1),
    inset 0 1px 0 rgba(255, 255, 255, 0.15);
}

.input-container--disabled .input-wrapper {
  opacity: 0.6;
  cursor: not-allowed;
  background: rgba(255, 255, 255, 0.05);
}

/* ========================================
   ì…ë ¥ í•„ë“œ ìŠ¤íƒ€ì¼
======================================== */

.input-field {
  flex: 1;
  background: transparent;
  border: none;
  outline: none;
  font-family: inherit;
  font-size: 14px; /* í—¤ë” subtitleê³¼ ë™ì¼í•œ í¬ê¸° */
  color: var(--text-primary, rgba(255, 255, 255, 0.95));
  line-height: 1.5;
  resize: none;
  min-height: 24px;
  
  /* iOS ì¤Œ ë°©ì§€ */
  -webkit-appearance: none;
  -webkit-border-radius: 0;
  border-radius: 0;
}

.input-field::placeholder {
  color: var(--text-secondary, rgba(255, 255, 255, 0.6));
  opacity: 1;
}

/* textarea ìë™ ë¦¬ì‚¬ì´ì¦ˆ */
.input-container--chat .input-field {
  min-height: 24px;
  max-height: 96px; /* 4ì¤„ ì •ë„ */
  overflow-y: hidden;
  word-wrap: break-word;
}

/* ========================================
   ì•„ì´ì½˜ ìŠ¤íƒ€ì¼ (ê²€ìƒ‰)
======================================== */

.input-icon-wrapper {
  display: flex;
  align-items: center;
  margin-right: 12px;
  flex-shrink: 0;
}

.input-icon {
  width: 20px;
  height: 20px;
  stroke: var(--text-secondary, rgba(255, 255, 255, 0.6));
  transition: all 0.25s cubic-bezier(0.4, 0, 0.2, 1);
}

.input-container--focused .input-icon {
  stroke: rgba(154, 120, 219, 0.8);
}

/* ========================================
   ì „ì†¡ ë²„íŠ¼ ìŠ¤íƒ€ì¼
======================================== */

.send-button {
  display: flex;
  align-items: center;
  justify-content: center;
  width: 40px;
  height: 40px;
  border-radius: 12px; /* selection-card arrowì™€ ë™ì¼ */
  border: none;
  margin-left: 12px;
  flex-shrink: 0;
  cursor: pointer;
  transition: all 0.25s cubic-bezier(0.4, 0, 0.2, 1);
  
  /* ê¸°ë³¸ ìƒíƒœ */
  background: rgba(255, 255, 255, 0.1);
  border: 1px solid var(--glass-border-dark, rgba(255, 255, 255, 0.2));
}

.send-button:disabled {
  opacity: 0.4;
  cursor: not-allowed;
  transform: none !important;
}

.send-button:not(:disabled):hover {
  background: rgba(255, 255, 255, 0.15);
  transform: scale(1.05);
  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
}

.send-button:not(:disabled):active {
  transform: scale(0.95);
}

/* í™œì„± ìƒíƒœ (í…ìŠ¤íŠ¸ê°€ ìˆì„ ë•Œ) - selection-card arrowì™€ ë™ì¼í•œ ìŠ¤íƒ€ì¼ */
.send-button--active {
  background: var(--primary-color, #9a78db);
  border-color: rgba(154, 120, 219, 0.6);
  box-shadow: 0 2px 8px rgba(154, 120, 219, 0.3); /* selection-cardì™€ ë™ì¼ */
}

.send-button--active:not(:disabled):hover {
  background: rgba(154, 120, 219, 0.9); /* selection-card hoverì™€ ë™ì¼ */
  transform: scale(1.05);
  box-shadow: 0 4px 16px rgba(154, 120, 219, 0.4); /* selection-card hoverì™€ ë™ì¼ */
}

/* ì „ì†¡ ì•„ì´ì½˜ */
.send-icon {
  width: 18px;
  height: 18px;
  stroke: var(--text-light, rgba(255, 255, 255, 0.7));
  transition: all 0.25s cubic-bezier(0.4, 0, 0.2, 1);
}

.send-button--active .send-icon {
  stroke: var(--text-light, rgba(255, 255, 255, 1));
}

.send-button:not(:disabled):hover .send-icon {
  stroke: rgba(255, 255, 255, 0.9);
}

/* ========================================
   Variantë³„ ìŠ¤íƒ€ì¼
======================================== */

/* Default Variant */
.input-container--default .input-wrapper {
  height: 48px;
  align-items: center;
}

.input-container--default .input-field {
  min-height: auto;
  height: 24px;
}

/* Chat Variant */
.input-container--chat .input-wrapper {
  min-height: 48px;
  align-items: center;
  padding: 12px 16px 12px 20px;
}

/* Chat variant send buttonì€ ì´ì œ ì¤‘ì•™ ì •ë ¬ë¡œ ìë™ ìœ„ì¹˜ */
/* .input-container--chat .send-button ìŠ¤íƒ€ì¼ ì œê±°ë¨ */

/* Search Variant */
.input-container--search .input-wrapper {
  height: 48px;
  align-items: center;
  padding-left: 20px;
}

.input-container--search .input-field {
  min-height: auto;
  height: 24px;
  margin-left: 0;
}

/* ========================================
   ë‹¤í¬ ëª¨ë“œ ìµœì í™”
======================================== */

@media (prefers-color-scheme: dark) {
  .input-wrapper {
    background: rgba(255, 255, 255, 0.08);
    border-color: rgba(255, 255, 255, 0.15);
  }
  
  .input-container--focused .input-wrapper {
    border-color: rgba(154, 120, 219, 0.7);
    box-shadow: 
      0 4px 20px rgba(154, 120, 219, 0.15),
      inset 0 1px 0 rgba(255, 255, 255, 0.1);
  }
  
  .input-field {
    color: rgba(255, 255, 255, 0.98);
  }
  
  .input-field::placeholder {
    color: rgba(255, 255, 255, 0.5);
  }
}

/* ========================================
   ëª¨ë°”ì¼ ë°˜ì‘í˜• ë””ìì¸ (selection-cardì™€ ë™ì¼í•œ ë¸Œë ˆì´í¬í¬ì¸íŠ¸)
======================================== */

/* ì‘ì€ í™”ë©´ ìµœì í™” (430px ì´í•˜) */
@media (max-width: 430px) {
  .input-wrapper {
    padding: 10px 14px;
    border-radius: 18px; /* ëª¨ë°”ì¼ì—ì„œ ì¡°ê¸ˆ ë” ë‘¥ê¸€ê²Œ */
  }
  
  .input-field {
    font-size: 13px; /* í—¤ë” subtitleê³¼ ë™ì¼í•œ í¬ê¸° (iOS ì¤Œ ë°©ì§€ëŠ” ìœ ì§€) */
  }
  
  .send-button {
    width: 36px;
    height: 36px;
    margin-left: 10px;
  }
  
  .send-icon {
    width: 16px;
    height: 16px;
  }
  
  .input-icon {
    width: 18px;
    height: 18px;
  }
  
  .input-icon-wrapper {
    margin-right: 10px;
  }
  
  /* Chat variant ëª¨ë°”ì¼ */
  .input-container--chat .input-wrapper {
    min-height: 44px;
    padding: 10px 14px 10px 16px;
  }
  
  /* Default/Search variant ëª¨ë°”ì¼ */
  .input-container--default .input-wrapper,
  .input-container--search .input-wrapper {
    height: 44px;
  }
}

/* iPhone 12/13 mini, iPhone SE (375px ì´í•˜) */
@media (max-width: 375px) {
  .input-wrapper {
    padding: 8px 12px;
    border-radius: 16px; /* selection-cardì™€ ë™ì¼í•œ í¬ê¸° ê°ì†Œ íŒ¨í„´ */
  }
  
  .input-field {
    font-size: 12px; /* í—¤ë” subtitleê³¼ ë™ì¼í•œ í¬ê¸° */
  }
  
  .send-button {
    width: 32px;
    height: 32px;
    margin-left: 8px;
    border-radius: 10px; /* selection-card arrowì™€ ë™ì¼ */
  }
  
  .send-icon {
    width: 14px;
    height: 14px;
  }
  
  .input-icon {
    width: 16px;
    height: 16px;
  }
  
  .input-icon-wrapper {
    margin-right: 8px;
  }
  
  .input-container--chat .input-wrapper {
    min-height: 40px;
    padding: 8px 12px 8px 14px;
  }
  
  .input-container--default .input-wrapper,
  .input-container--search .input-wrapper {
    height: 40px;
  }
}

/* ì´ˆì†Œí˜• ê¸°ê¸° (320px ì´í•˜) - selection-cardì™€ ë™ì¼í•œ ë°˜ì‘í˜• */
@media (max-width: 320px) {
  .input-wrapper {
    padding: 6px 10px;
    border-radius: 14px;
  }
  
  .input-field {
    font-size: 11px; /* í—¤ë” subtitleê³¼ ë™ì¼í•œ í¬ê¸° */
  }
  
  .send-button {
    width: 28px;
    height: 28px;
    margin-left: 6px;
    border-radius: 8px; /* selection-cardì™€ ë™ì¼ */
  }
  
  .send-icon {
    width: 12px;
    height: 12px;
  }
  
  .input-container--chat .input-wrapper {
    min-height: 36px;
  }
  
  .input-container--default .input-wrapper,
  .input-container--search .input-wrapper {
    height: 36px;
  }
}

/* ========================================
   ê°€ë¡œ ëª¨ë“œ ìµœì í™” (selection-cardì™€ ë™ì¼)
======================================== */

@media (orientation: landscape) and (max-height: 600px) {
  .input-wrapper {
    border-radius: 16px;
  }
  
  .send-button {
    width: 32px;
    height: 32px;
    border-radius: 8px;
  }
  
  .input-container--chat .input-wrapper {
    min-height: 40px;
  }
  
  .input-container--default .input-wrapper,
  .input-container--search .input-wrapper {
    height: 40px;
  }
}

/* ========================================
   ì ‘ê·¼ì„± ì§€ì›
======================================== */

/* í¬ì»¤ìŠ¤ ë§ */
.input-field:focus {
  outline: none; /* ì»¤ìŠ¤í…€ í¬ì»¤ìŠ¤ ìŠ¤íƒ€ì¼ ì‚¬ìš© */
}

.send-button:focus {
  outline: 2px solid rgba(154, 120, 219, 0.8);
  outline-offset: 2px;
}

/* í‚¤ë³´ë“œ ë„¤ë¹„ê²Œì´ì…˜ */
.send-button:focus-visible {
  outline: 3px solid rgba(154, 120, 219, 1);
  outline-offset: 3px;
}

/* ========================================
   í„°ì¹˜ ë””ë°”ì´ìŠ¤ ìµœì í™” (selection-cardì™€ ë™ì¼)
======================================== */

@media (hover: none) and (pointer: coarse) {
  .send-button:hover {
    transform: none;
    background: rgba(255, 255, 255, 0.1);
    box-shadow: none;
  }
  
  .send-button--active:hover {
    background: var(--primary-color, #9a78db);
    transform: none;
    box-shadow: 0 2px 8px rgba(154, 120, 219, 0.3);
  }
  
  /* í„°ì¹˜ í”¼ë“œë°± */
  .send-button:active {
    transform: scale(0.95);
  }
  
  /* íƒ­ í•˜ì´ë¼ì´íŠ¸ ì œê±° */
  .input-field,
  .send-button {
    -webkit-tap-highlight-color: transparent;
  }
}

/* ========================================
   ì• ë‹ˆë©”ì´ì…˜ ê°ì†Œ ì§€ì›
======================================== */

@media (prefers-reduced-motion: reduce) {
  .input-wrapper,
  .send-button,
  .send-icon,
  .input-icon {
    transition: none;
  }
  
  .send-button:hover,
  .send-button:active {
    transform: none;
  }
} 