# ìš´ì˜ ë§¤ë‰´ì–¼ (Operations Manual)

## 14.1 ì¼ì¼ ìš´ì˜ ì²´í¬ë¦¬ìŠ¤íŠ¸

### ì˜¤ì „ ì ê²€ (09:00 - 10:00)

### ì‹œìŠ¤í…œ ìƒíƒœ í™•ì¸

```bash
#!/bin/bash
# morning-check.sh - ì˜¤ì „ ì¼ì¼ ì ê²€ ìŠ¤í¬ë¦½íŠ¸

echo "=== YouTube Shorts íë ˆì´ì…˜ ì„œë¹„ìŠ¤ ì¼ì¼ ì ê²€ ì‹œì‘ ==="
echo "ì‹œì‘ ì‹œê°„: $(date)"

# 1. ì„œë¹„ìŠ¤ ê°€ìš©ì„± í™•ì¸
echo -e "\n[1/8] ì„œë¹„ìŠ¤ ê°€ìš©ì„± í™•ì¸"
services=(
    "https://api.yourservice.com/health"
    "https://app.yourservice.com"
    "https://admin.yourservice.com"
)

for service in "${services[@]}"; do
    response=$(curl -s -o /dev/null -w "%{http_code}" "$service")
    if [ "$response" = "200" ]; then
        echo "âœ… $service - ì •ìƒ"
    else
        echo "âŒ $service - ì‘ë‹µ ì½”ë“œ: $response"
        # ì•Œë¦¼ ë°œì†¡
        send_alert "ì„œë¹„ìŠ¤ ë‹¤ìš´: $service"
    fi
done

# 2. ë°ì´í„°ë² ì´ìŠ¤ ìƒíƒœ
echo -e "\n[2/8] ë°ì´í„°ë² ì´ìŠ¤ ìƒíƒœ"
db_status=$(psql -h $DB_HOST -U $DB_USER -d $DB_NAME -c "SELECT 1" 2>&1)
if [ $? -eq 0 ]; then
    echo "âœ… PostgreSQL - ì •ìƒ"

    # ì—°ê²° ìˆ˜ í™•ì¸
    connections=$(psql -h $DB_HOST -U $DB_USER -d $DB_NAME -t -c \
        "SELECT count(*) FROM pg_stat_activity WHERE state = 'active'")
    echo "   í™œì„± ì—°ê²°: $connections / 100"

    # ëŠë¦° ì¿¼ë¦¬ í™•ì¸
    slow_queries=$(psql -h $DB_HOST -U $DB_USER -d $DB_NAME -t -c \
        "SELECT count(*) FROM pg_stat_activity WHERE state = 'active' AND query_start < now() - interval '5 seconds'")
    if [ $slow_queries -gt 0 ]; then
        echo "âš ï¸  ëŠë¦° ì¿¼ë¦¬ ê°ì§€: $slow_queries ê°œ"
    fi
else
    echo "âŒ PostgreSQL - ì—°ê²° ì‹¤íŒ¨"
    send_alert "ë°ì´í„°ë² ì´ìŠ¤ ì—°ê²° ì‹¤íŒ¨"
fi

# 3. API í• ë‹¹ëŸ‰ í™•ì¸
echo -e "\n[3/8] YouTube API í• ë‹¹ëŸ‰"
api_usage=$(curl -s "https://api.yourservice.com/admin/youtube-quota" \
    -H "Authorization: Bearer $ADMIN_TOKEN")
quota_used=$(echo $api_usage | jq -r '.used')
quota_limit=$(echo $api_usage | jq -r '.limit')
quota_percent=$((quota_used * 100 / quota_limit))

echo "   ì‚¬ìš©ëŸ‰: $quota_used / $quota_limit ($quota_percent%)"
if [ $quota_percent -gt 80 ]; then
    echo "âš ï¸  API í• ë‹¹ëŸ‰ ê²½ê³ : 80% ì´ˆê³¼"
    send_alert "YouTube API í• ë‹¹ëŸ‰ 80% ì´ˆê³¼"
fi

# 4. ìºì‹œ ìƒíƒœ
echo -e "\n[4/8] ìºì‹œ ì‹œìŠ¤í…œ"
cache_stats=$(curl -s "https://api.yourservice.com/admin/cache-stats" \
    -H "Authorization: Bearer $ADMIN_TOKEN")
hit_rate=$(echo $cache_stats | jq -r '.hit_rate')
memory_usage=$(echo $cache_stats | jq -r '.memory_usage_percent')

echo "   ìºì‹œ ì ì¤‘ë¥ : $hit_rate%"
echo "   ë©”ëª¨ë¦¬ ì‚¬ìš©ë¥ : $memory_usage%"

# 5. ì—ëŸ¬ ë¡œê·¸ í™•ì¸
echo -e "\n[5/8] ìµœê·¼ 24ì‹œê°„ ì—ëŸ¬"
error_count=$(grep -c "ERROR" /var/log/app/error.log | tail -24h)
if [ $error_count -gt 10 ]; then
    echo "âš ï¸  ì—ëŸ¬ ì¦ê°€: $error_count ê±´"
    # ì£¼ìš” ì—ëŸ¬ íƒ€ì… ë¶„ì„
    echo "   ì£¼ìš” ì—ëŸ¬:"
    grep "ERROR" /var/log/app/error.log | tail -24h | \
        awk '{print $4}' | sort | uniq -c | sort -rn | head -5
fi

# 6. ë””ìŠ¤í¬ ì‚¬ìš©ëŸ‰
echo -e "\n[6/8] ë””ìŠ¤í¬ ì‚¬ìš©ëŸ‰"
df -h | grep -E "^/dev/" | while read line; do
    usage=$(echo $line | awk '{print $5}' | sed 's/%//')
    mount=$(echo $line | awk '{print $6}')
    if [ $usage -gt 80 ]; then
        echo "âš ï¸  $mount: $usage% ì‚¬ìš©ì¤‘"
    else
        echo "âœ… $mount: $usage% ì‚¬ìš©ì¤‘"
    fi
done

# 7. SSL ì¸ì¦ì„œ ë§Œë£Œì¼
echo -e "\n[7/8] SSL ì¸ì¦ì„œ ìƒíƒœ"
domains=("api.yourservice.com" "app.yourservice.com")
for domain in "${domains[@]}"; do
    expiry_date=$(echo | openssl s_client -servername $domain -connect $domain:443 2>/dev/null | \
        openssl x509 -noout -enddate | cut -d= -f2)
    days_left=$(( ($(date -d "$expiry_date" +%s) - $(date +%s)) / 86400 ))

    if [ $days_left -lt 30 ]; then
        echo "âš ï¸  $domain: $days_left ì¼ ë‚¨ìŒ"
    else
        echo "âœ… $domain: $days_left ì¼ ë‚¨ìŒ"
    fi
done

# 8. ë°±ì—… ìƒíƒœ
echo -e "\n[8/8] ë°±ì—… ìƒíƒœ"
latest_backup=$(find /backup -name "*.sql.gz" -mtime -1 | wc -l)
if [ $latest_backup -gt 0 ]; then
    echo "âœ… ì¼ì¼ ë°±ì—… ì™„ë£Œ"
else
    echo "âŒ ë°±ì—… ì‹¤íŒ¨"
    send_alert "ì¼ì¼ ë°±ì—… ì‹¤íŒ¨"
fi

echo -e "\n=== ì ê²€ ì™„ë£Œ: $(date) ==="

```

### ìš´ì˜ ëŒ€ì‹œë³´ë“œ ì²´í¬ë¦¬ìŠ¤íŠ¸

```jsx
// ìš´ì˜íŒ€ ì¼ì¼ ì²´í¬ë¦¬ìŠ¤íŠ¸
const dailyOperationsChecklist = {
  morning: {
    time: "09:00 - 10:00",
    tasks: [
      {
        category: "ì‹œìŠ¤í…œ ëª¨ë‹ˆí„°ë§",
        items: [
          {
            task: "Grafana ëŒ€ì‹œë³´ë“œ í™•ì¸",
            checks: [
              "CPU ì‚¬ìš©ë¥  < 70%",
              "ë©”ëª¨ë¦¬ ì‚¬ìš©ë¥  < 80%",
              "ì‘ë‹µ ì‹œê°„ < 500ms",
              "ì—ëŸ¬ìœ¨ < 1%"
            ],
            action: "ì´ìƒ ì‹œ ìŠ¤ì¼€ì¼ë§ ë˜ëŠ” ì¬ì‹œì‘"
          },
          {
            task: "Railway ë°°í¬ ìƒíƒœ",
            checks: [
              "ëª¨ë“  ì„œë¹„ìŠ¤ Running ìƒíƒœ",
              "ìµœê·¼ ë°°í¬ ì„±ê³µ ì—¬ë¶€",
              "í™˜ê²½ ë³€ìˆ˜ ë™ê¸°í™”"
            ],
            action: "ì‹¤íŒ¨ ì‹œ ë¡¤ë°± ê²€í† "
          },
          {
            task: "Supabase ìƒíƒœ",
            checks: [
              "ë°ì´í„°ë² ì´ìŠ¤ ì—°ê²° í’€",
              "ì‹¤ì‹œê°„ êµ¬ë… ìƒíƒœ",
              "ìŠ¤í† ë¦¬ì§€ ì‚¬ìš©ëŸ‰"
            ],
            action: "ì„ê³„ê°’ ì´ˆê³¼ ì‹œ ì •ë¦¬ ì‘ì—…"
          }
        ]
      },
      {
        category: "ë¹„ì¦ˆë‹ˆìŠ¤ ë©”íŠ¸ë¦­",
        items: [
          {
            task: "ì‚¬ìš©ì í™œë™ í™•ì¸",
            metrics: [
              "ì‹ ê·œ ê°€ì…ì ìˆ˜",
              "DAU (ì¼ì¼ í™œì„± ì‚¬ìš©ì)",
              "í‰ê·  ì„¸ì…˜ ì‹œê°„",
              "ì´íƒˆë¥ "
            ],
            baseline: {
              newUsers: 50,
              dau: 1000,
              sessionTime: "10ë¶„",
              bounceRate: "30%"
            }
          },
          {
            task: "ìˆ˜ìµ ì§€í‘œ",
            metrics: [
              "ìœ ë£Œ ì „í™˜ìœ¨",
              "ì¼ì¼ ìˆ˜ìµ",
              "ê²°ì œ ì‹¤íŒ¨ìœ¨",
              "í•´ì§€ìœ¨"
            ],
            alerts: "ì „ì¼ ëŒ€ë¹„ 20% ì´ìƒ ë³€ë™ ì‹œ"
          }
        ]
      },
      {
        category: "ì½˜í…ì¸  ìƒíƒœ",
        items: [
          {
            task: "ìºì‹œ ì½˜í…ì¸  í™•ì¸",
            checks: [
              "ìºì‹œëœ í‚¤ì›Œë“œ ìˆ˜",
              "í‰ê·  ì˜ìƒ ìˆ˜/í‚¤ì›Œë“œ",
              "ìºì‹œ ë§Œë£Œ ì˜ˆì •",
              "ì½˜í…ì¸  í’ˆì§ˆ ì ìˆ˜"
            ]
          },
          {
            task: "íŠ¸ë Œë“œ ì—…ë°ì´íŠ¸",
            checks: [
              "íŠ¸ë Œë“œ í‚¤ì›Œë“œ ê°±ì‹  ì‹œê°„",
              "ìƒˆë¡œìš´ íŠ¸ë Œë“œ ê°ì§€",
              "ì§€ì—­ë³„ íŠ¸ë Œë“œ ì°¨ì´"
            ]
          }
        ]
      }
    ]
  },

  afternoon: {
    time: "14:00 - 15:00",
    tasks: [
      {
        category: "API ìƒíƒœ",
        items: [
          {
            task: "YouTube API ì‚¬ìš©ëŸ‰",
            checks: [
              "í˜„ì¬ ì‚¬ìš©ëŸ‰ / ì¼ì¼ í•œë„",
              "ì‹œê°„ë‹¹ ì‚¬ìš© ì¶”ì„¸",
              "ì˜ˆìƒ ì†Œì§„ ì‹œê°„",
              "ë¹„ìƒ ê³„íš ì¤€ë¹„ ìƒíƒœ"
            ],
            thresholds: {
              warning: "70%",
              critical: "85%",
              action: "ìºì‹œ ì „ìš© ëª¨ë“œ ì „í™˜"
            }
          },
          {
            task: "Claude API ìƒíƒœ",
            checks: [
              "ì‘ë‹µ ì‹œê°„",
              "ì—ëŸ¬ìœ¨",
              "í† í° ì‚¬ìš©ëŸ‰",
              "ë¹„ìš© ì¶”ì "
            ]
          }
        ]
      },
      {
        category: "ì‚¬ìš©ì ì§€ì›",
        items: [
          {
            task: "ì§€ì› í‹°ì¼“ ê²€í† ",
            priorities: [
              "P0: ì„œë¹„ìŠ¤ ì ‘ì† ë¶ˆê°€",
              "P1: í•µì‹¬ ê¸°ëŠ¥ ì˜¤ë¥˜",
              "P2: ë¶€ê°€ ê¸°ëŠ¥ ë¬¸ì œ",
              "P3: ê°œì„  ìš”ì²­"
            ],
            sla: {
              P0: "1ì‹œê°„ ë‚´ ì‘ë‹µ",
              P1: "4ì‹œê°„ ë‚´ ì‘ë‹µ",
              P2: "24ì‹œê°„ ë‚´ ì‘ë‹µ",
              P3: "48ì‹œê°„ ë‚´ ì‘ë‹µ"
            }
          },
          {
            task: "ì‚¬ìš©ì í”¼ë“œë°± ë¶„ì„",
            sources: [
              "ì¸ì•± í”¼ë“œë°±",
              "ì´ë©”ì¼ ë¬¸ì˜",
              "ì†Œì…œ ë¯¸ë””ì–´ ë©˜ì…˜",
              "ì•±ìŠ¤í† ì–´ ë¦¬ë·°"
            ]
          }
        ]
      }
    ]
  },

  evening: {
    time: "17:00 - 18:00",
    tasks: [
      {
        category: "ì¼ì¼ ë§ˆê°",
        items: [
          {
            task: "ë°±ì—… í™•ì¸",
            types: [
              "ë°ì´í„°ë² ì´ìŠ¤ ì „ì²´ ë°±ì—…",
              "ì¦ë¶„ ë°±ì—…",
              "ë¡œê·¸ íŒŒì¼ ì•„ì¹´ì´ë¹™",
              "ì„¤ì • íŒŒì¼ ë°±ì—…"
            ],
            verification: "ë³µêµ¬ í…ŒìŠ¤íŠ¸ (ì£¼ 1íšŒ)"
          },
          {
            task: "ë³´ì•ˆ ì ê²€",
            checks: [
              "ë¹„ì •ìƒ ì ‘ê·¼ ì‹œë„",
              "Failed login attempts",
              "API ë‚¨ìš© íŒ¨í„´",
              "DDoS ì§•í›„"
            ]
          },
          {
            task: "ë‚´ì¼ ì¤€ë¹„",
            items: [
              "ì˜ˆì •ëœ ìœ ì§€ë³´ìˆ˜ ê³µì§€",
              "ìºì‹œ ê°±ì‹  ìŠ¤ì¼€ì¤„",
              "íŒ€ ì¸ìˆ˜ì¸ê³„ ì‚¬í•­",
              "ê¸´ê¸‰ ì—°ë½ë§ í™•ì¸"
            ]
          }
        ]
      }
    ]
  }
};

```

### ì£¼ê°„/ì›”ê°„ ì •ê¸° ì‘ì—…

### ì£¼ê°„ ìš´ì˜ íƒœìŠ¤í¬

```jsx
const weeklyOperationsTasks = {
  monday: {
    focus: "ì„±ëŠ¥ ë¶„ì„ ë° ìµœì í™”",
    tasks: [
      {
        name: "ì£¼ê°„ ì„±ëŠ¥ ë¦¬í¬íŠ¸",
        steps: [
          "ì§€ë‚œ ì£¼ ì„±ëŠ¥ ë©”íŠ¸ë¦­ ìˆ˜ì§‘",
          "ë³‘ëª© ì§€ì  ë¶„ì„",
          "ìµœì í™” ëŒ€ìƒ ì„ ì •",
          "ê°œì„  ê³„íš ìˆ˜ë¦½"
        ],
        deliverables: ["ì„±ëŠ¥ ë¦¬í¬íŠ¸", "ìµœì í™” ë°±ë¡œê·¸"]
      },
      {
        name: "ë°ì´í„°ë² ì´ìŠ¤ ìœ ì§€ë³´ìˆ˜",
        steps: [
          "ì¸ë±ìŠ¤ ì¬êµ¬ì„±",
          "í†µê³„ ì—…ë°ì´íŠ¸",
          "ë¶ˆí•„ìš”í•œ ë°ì´í„° ì •ë¦¬",
          "íŒŒí‹°ì…˜ ê´€ë¦¬"
        ],
        maintenanceWindow: "02:00 - 04:00 KST"
      }
    ]
  },

  wednesday: {
    focus: "ë³´ì•ˆ ë° ì»´í”Œë¼ì´ì–¸ìŠ¤",
    tasks: [
      {
        name: "ë³´ì•ˆ ê°ì‚¬",
        checklist: [
          "ì ‘ê·¼ ê¶Œí•œ ê²€í† ",
          "ë³´ì•ˆ íŒ¨ì¹˜ ì ìš© ì—¬ë¶€",
          "ë¡œê·¸ ë¶„ì„",
          "ì·¨ì•½ì  ìŠ¤ìº”"
        ],
        tools: ["OWASP ZAP", "Nessus", "Custom Scripts"]
      },
      {
        name: "ì»´í”Œë¼ì´ì–¸ìŠ¤ ì²´í¬",
        items: [
          "ê°œì¸ì •ë³´ ì²˜ë¦¬ ë°©ì¹¨ ì¤€ìˆ˜",
          "YouTube ToS ì¤€ìˆ˜",
          "ê²°ì œ ì •ë³´ ë³´ì•ˆ (PCI DSS)",
          "ë°ì´í„° ë³´ê´€ ì •ì±…"
        ]
      }
    ]
  },

  friday: {
    focus: "ë°°í¬ ë° ì—…ë°ì´íŠ¸",
    tasks: [
      {
        name: "ì •ê¸° ë°°í¬",
        process: [
          {
            time: "14:00",
            step: "ë°°í¬ ì¤€ë¹„",
            checks: [
              "ëª¨ë“  í…ŒìŠ¤íŠ¸ í†µê³¼",
              "ë°°í¬ ë…¸íŠ¸ ì‘ì„±",
              "ë¡¤ë°± ê³„íš ì¤€ë¹„",
              "ëª¨ë‹ˆí„°ë§ ëŒ€ì‹œë³´ë“œ ì¤€ë¹„"
            ]
          },
          {
            time: "15:00",
            step: "ë‹¨ê³„ì  ë°°í¬",
            stages: [
              "10% íŠ¸ë˜í”½ (30ë¶„)",
              "50% íŠ¸ë˜í”½ (30ë¶„)",
              "100% íŠ¸ë˜í”½"
            ]
          },
          {
            time: "17:00",
            step: "ë°°í¬ ê²€ì¦",
            metrics: [
              "ì—ëŸ¬ìœ¨ í™•ì¸",
              "ì„±ëŠ¥ ì§€í‘œ ë¹„êµ",
              "ì‚¬ìš©ì í”¼ë“œë°± ëª¨ë‹ˆí„°ë§"
            ]
          }
        ]
      }
    ]
  }
};

```

## 14.2 ì¥ì•  ëŒ€ì‘ í”„ë¡œì„¸ìŠ¤

### ì¥ì•  ë“±ê¸‰ ì •ì˜ ë° ëŒ€ì‘ ì ˆì°¨

### ì¥ì•  ë“±ê¸‰ ë¶„ë¥˜

```jsx
const incidentSeverityLevels = {
  P0_Critical: {
    definition: "ì „ì²´ ì„œë¹„ìŠ¤ ì¤‘ë‹¨ ë˜ëŠ” ë°ì´í„° ì†ì‹¤ ìœ„í—˜",
    examples: [
      "ëª¨ë“  ì‚¬ìš©ì ë¡œê·¸ì¸ ë¶ˆê°€",
      "ë°ì´í„°ë² ì´ìŠ¤ ì ‘ê·¼ ë¶ˆê°€",
      "ê²°ì œ ì‹œìŠ¤í…œ ì˜¤ë¥˜",
      "ë³´ì•ˆ ì¹¨í•´"
    ],
    response: {
      timeToAcknowledge: "5ë¶„",
      timeToResolve: "1ì‹œê°„",
      escalation: "ì¦‰ì‹œ",
      team: ["On-call Engineer", "Tech Lead", "CTO"]
    },
    communication: {
      internal: "ì¦‰ì‹œ Slack #incident ì±„ë„",
      external: "15ë¶„ ë‚´ ìƒíƒœ í˜ì´ì§€ ì—…ë°ì´íŠ¸",
      customers: "ì´ë©”ì¼/ì¸ì•± ê³µì§€ (ì˜í–¥ë°›ëŠ” ì‚¬ìš©ì)"
    }
  },

  P1_Major: {
    definition: "í•µì‹¬ ê¸°ëŠ¥ ì¥ì•  ë˜ëŠ” ë‹¤ìˆ˜ ì‚¬ìš©ì ì˜í–¥",
    examples: [
      "ê²€ìƒ‰ ê¸°ëŠ¥ ì˜¤ë¥˜",
      "ì˜ìƒ ì¬ìƒ ë¶ˆê°€",
      "AI ì¶”ì²œ ì¤‘ë‹¨",
      "ëŠë¦° ì‘ë‹µ ì‹œê°„ (>5ì´ˆ)"
    ],
    response: {
      timeToAcknowledge: "15ë¶„",
      timeToResolve: "4ì‹œê°„",
      escalation: "30ë¶„ í›„",
      team: ["On-call Engineer", "Service Owner"]
    },
    communication: {
      internal: "Slack ì•Œë¦¼",
      external: "30ë¶„ ë‚´ ìƒíƒœ í˜ì´ì§€",
      customers: "ì‹¬ê°ë„ì— ë”°ë¼ ê²°ì •"
    }
  },

  P2_Minor: {
    definition: "ë¶€ê°€ ê¸°ëŠ¥ ì˜¤ë¥˜ ë˜ëŠ” ì¼ë¶€ ì‚¬ìš©ì ì˜í–¥",
    examples: [
      "í”„ë¡œí•„ ì´ë¯¸ì§€ ì—…ë¡œë“œ ì˜¤ë¥˜",
      "í†µê³„ ì§€ì—°",
      "íŠ¹ì • ë¸Œë¼ìš°ì € ì´ìŠˆ",
      "UI ê¹¨ì§"
    ],
    response: {
      timeToAcknowledge: "1ì‹œê°„",
      timeToResolve: "24ì‹œê°„",
      escalation: "í•„ìš”ì‹œ",
      team: ["Assigned Developer"]
    },
    communication: {
      internal: "ì´ìŠˆ íŠ¸ë˜ì»¤",
      external: "í•„ìš”ì‹œ",
      customers: "FAQ ì—…ë°ì´íŠ¸"
    }
  },

  P3_Low: {
    definition: "ì‚¬ìš©ì„± ê°œì„  ë˜ëŠ” ë¯¸ë¯¸í•œ ë²„ê·¸",
    examples: [
      "ì˜¤íƒ€",
      "ìƒ‰ìƒ ë¶ˆì¼ì¹˜",
      "ë²ˆì—­ ì˜¤ë¥˜",
      "ì„±ëŠ¥ ê°œì„  ìš”ì²­"
    ],
    response: {
      timeToAcknowledge: "2ì¼",
      timeToResolve: "ë‹¤ìŒ ë¦´ë¦¬ì¦ˆ",
      escalation: "ì—†ìŒ",
      team: ["Product Team"]
    }
  }
};

```

### ì¥ì•  ëŒ€ì‘ í”Œë ˆì´ë¶

```jsx
// P0 Critical ì¥ì•  ëŒ€ì‘ ìŠ¤í¬ë¦½íŠ¸
const criticalIncidentPlaybook = {
  // 1ë‹¨ê³„: ê°ì§€ ë° ì´ˆê¸° ëŒ€ì‘ (0-5ë¶„)
  detection: {
    triggers: [
      "ëª¨ë‹ˆí„°ë§ ì•Œë¦¼",
      "ì‚¬ìš©ì ì‹ ê³ ",
      "ìë™ í—¬ìŠ¤ì²´í¬ ì‹¤íŒ¨"
    ],

    immediateActions: [
      {
        action: "ì¥ì•  í™•ì¸",
        command: `curl -s https://api.yourservice.com/health | jq '.'`,
        checkPoints: [
          "API ì‘ë‹µ ìƒíƒœ",
          "ë°ì´í„°ë² ì´ìŠ¤ ì—°ê²°",
          "ì™¸ë¶€ ì„œë¹„ìŠ¤ ìƒíƒœ"
        ]
      },
      {
        action: "ì˜í–¥ ë²”ìœ„ íŒŒì•…",
        queries: [
          "SELECT count(*) FROM active_sessions WHERE last_activity > NOW() - INTERVAL '5 minutes';",
          "SELECT service_name, error_count FROM service_errors WHERE timestamp > NOW() - INTERVAL '10 minutes';"
        ]
      },
      {
        action: "ì¸ì‹œë˜íŠ¸ ìƒì„±",
        template: {
          title: "[P0] ${service} ì¥ì•  - ${timestamp}",
          description: "ì˜í–¥: ${affected_users}ëª…, ì¦ìƒ: ${symptoms}",
          commander: "${on_call_engineer}",
          channel: "#incident-${id}"
        }
      }
    ]
  },

  // 2ë‹¨ê³„: ì§„ë‹¨ ë° ì™„í™” (5-15ë¶„)
  diagnosis: {
    checkList: [
      {
        area: "ì¸í”„ë¼",
        commands: [
          "kubectl get pods -n production",
          "kubectl top nodes",
          "kubectl describe pod ${pod_name}"
        ],
        metrics: ["CPU", "Memory", "Disk I/O", "Network"]
      },
      {
        area: "ì• í”Œë¦¬ì¼€ì´ì…˜",
        commands: [
          "tail -f /var/log/app/error.log | grep ERROR",
          "pm2 status",
          "npm run health-check"
        ],
        focus: ["ì—ëŸ¬ ìŠ¤íƒíŠ¸ë ˆì´ìŠ¤", "ë©”ëª¨ë¦¬ ëˆ„ìˆ˜", "ë¬´í•œ ë£¨í”„"]
      },
      {
        area: "ë°ì´í„°ë² ì´ìŠ¤",
        commands: [
          "pg_stat_activity í™•ì¸",
          "ìŠ¬ë¡œìš° ì¿¼ë¦¬ í™•ì¸",
          "ë½ ìƒíƒœ í™•ì¸",
          "ë ˆí”Œë¦¬ì¼€ì´ì…˜ ì§€ì—°"
        ]
      }
    ],

    mitigationOptions: [
      {
        scenario: "íŠ¸ë˜í”½ ê³¼ë¶€í•˜",
        actions: [
          "ì˜¤í† ìŠ¤ì¼€ì¼ë§ íŠ¸ë¦¬ê±°",
          "Rate limiting ê°•í™”",
          "ìºì‹œ TTL ì¦ê°€",
          "ë¹„í•„ìˆ˜ ê¸°ëŠ¥ ë¹„í™œì„±í™”"
        ]
      },
      {
        scenario: "ë©”ëª¨ë¦¬ ëˆ„ìˆ˜",
        actions: [
          "ì• í”Œë¦¬ì¼€ì´ì…˜ ì¬ì‹œì‘",
          "ë¡¤ë§ ì¬ì‹œì‘",
          "ì´ì „ ë²„ì „ ë¡¤ë°±",
          "ë©”ëª¨ë¦¬ ë¤í”„ ìˆ˜ì§‘"
        ]
      },
      {
        scenario: "ì™¸ë¶€ ì„œë¹„ìŠ¤ ì¥ì• ",
        actions: [
          "Circuit breaker í™œì„±í™”",
          "í´ë°± ë©”ì»¤ë‹ˆì¦˜ ì‚¬ìš©",
          "ìºì‹œ ë°ì´í„° í™œìš©",
          "ì‚¬ìš©ì ê³µì§€"
        ]
      }
    ]
  },

  // 3ë‹¨ê³„: ë³µêµ¬ ë° ê²€ì¦ (15-60ë¶„)
  recovery: {
    steps: [
      {
        name: "ê·¼ë³¸ ì›ì¸ ìˆ˜ì •",
        actions: [
          "í•«í”½ìŠ¤ ê°œë°œ",
          "ì½”ë“œ ë¦¬ë·° (ìµœì†Œ 2ëª…)",
          "ê¸´ê¸‰ í…ŒìŠ¤íŠ¸",
          "ë°°í¬ ì¤€ë¹„"
        ]
      },
      {
        name: "ë‹¨ê³„ì  ë³µêµ¬",
        process: [
          "ì¹´ë‚˜ë¦¬ ë°°í¬ (5%)",
          "ëª¨ë‹ˆí„°ë§ (10ë¶„)",
          "ì ì§„ì  í™•ëŒ€ (25% â†’ 50% â†’ 100%)",
          "ê° ë‹¨ê³„ë³„ ê²€ì¦"
        ]
      },
      {
        name: "ì„œë¹„ìŠ¤ ì •ìƒí™” í™•ì¸",
        verifications: [
          "ëª¨ë“  í—¬ìŠ¤ì²´í¬ í†µê³¼",
          "ì—ëŸ¬ìœ¨ < 0.1%",
          "ì‘ë‹µì‹œê°„ ì •ìƒ",
          "ì‚¬ìš©ì í”¼ë“œë°± í™•ì¸"
        ]
      }
    ]
  },

  // 4ë‹¨ê³„: ì‚¬í›„ ë¶„ì„ (ì¥ì•  ì¢…ë£Œ í›„ 48ì‹œê°„ ë‚´)
  postmortem: {
    template: {
      sections: [
        {
          title: "ì¥ì•  ìš”ì•½",
          content: [
            "ë°œìƒ ì‹œê°„",
            "ë³µêµ¬ ì‹œê°„",
            "ì˜í–¥ë°›ì€ ì‚¬ìš©ì ìˆ˜",
            "ë¹„ì¦ˆë‹ˆìŠ¤ ì„íŒ©íŠ¸"
          ]
        },
        {
          title: "íƒ€ì„ë¼ì¸",
          format: "HH:MM - ì´ë²¤íŠ¸ ì„¤ëª…"
        },
        {
          title: "ê·¼ë³¸ ì›ì¸",
          analysis: [
            "ì§ì ‘ ì›ì¸",
            "ê¸°ì—¬ ìš”ì¸",
            "ì™œ ê°ì§€ê°€ ëŠ¦ì—ˆëŠ”ê°€?",
            "ì™œ ë³µêµ¬ê°€ ì˜¤ë˜ ê±¸ë ¸ëŠ”ê°€?"
          ]
        },
        {
          title: "ì˜í•œ ì ",
          items: ["ë¹ ë¥¸ ëŒ€ì‘", "íš¨ê³¼ì ì¸ ì»¤ë®¤ë‹ˆì¼€ì´ì…˜", "...]
        },
        {
          title: "ê°œì„  ì‚¬í•­",
          actionItems: [
            {
              issue: "ëª¨ë‹ˆí„°ë§ ë¶€ì¡±",
              action: "XX ë©”íŠ¸ë¦­ ì¶”ê°€",
              owner: "DevOpsíŒ€",
              due: "2ì£¼ ë‚´"
            }
          ]
        }
      ]
    }
  }
};

```

### ìë™í™”ëœ ì¥ì•  ëŒ€ì‘

```jsx
// ìë™ ë³µêµ¬ ì‹œìŠ¤í…œ
class AutoRecoverySystem {
  constructor() {
    this.healthChecks = new Map();
    this.recoveryActions = new Map();
    this.incidentHistory = [];
  }

  // í—¬ìŠ¤ì²´í¬ ë“±ë¡
  registerHealthCheck(service, config) {
    this.healthChecks.set(service, {
      url: config.url,
      interval: config.interval || 30000,
      timeout: config.timeout || 5000,
      retries: config.retries || 3,
      thresholds: config.thresholds
    });
  }

  // ìë™ ë³µêµ¬ ì•¡ì…˜ ë“±ë¡
  registerRecoveryAction(condition, action) {
    this.recoveryActions.set(condition, action);
  }

  // ëª¨ë‹ˆí„°ë§ ì‹œì‘
  async startMonitoring() {
    for (const [service, config] of this.healthChecks) {
      setInterval(async () => {
        const health = await this.checkHealth(service, config);

        if (!health.healthy) {
          await this.handleUnhealthy(service, health);
        }
      }, config.interval);
    }
  }

  // ê±´ê°• ìƒíƒœ í™•ì¸
  async checkHealth(service, config) {
    let lastError;

    for (let i = 0; i < config.retries; i++) {
      try {
        const response = await fetch(config.url, {
          timeout: config.timeout
        });

        const data = await response.json();

        // ì„ê³„ê°’ ê²€ì‚¬
        for (const [metric, threshold] of Object.entries(config.thresholds)) {
          if (data[metric] > threshold.critical) {
            return {
              healthy: false,
              reason: `${metric} exceeded critical threshold`,
              value: data[metric],
              threshold: threshold.critical
            };
          }
        }

        return { healthy: true, data };

      } catch (error) {
        lastError = error;
        await this.sleep(1000 * (i + 1)); // ë°±ì˜¤í”„
      }
    }

    return {
      healthy: false,
      reason: 'Health check failed',
      error: lastError
    };
  }

  // ë¹„ì •ìƒ ìƒíƒœ ì²˜ë¦¬
  async handleUnhealthy(service, health) {
    console.error(`Service unhealthy: ${service}`, health);

    // ìë™ ë³µêµ¬ ì‹œë„
    const recovered = await this.attemptAutoRecovery(service, health);

    if (!recovered) {
      // ìˆ˜ë™ ê°œì… í•„ìš”
      await this.escalateIncident(service, health);
    }
  }

  // ìë™ ë³µêµ¬ ì‹œë„
  async attemptAutoRecovery(service, health) {
    const recoveryKey = `${service}:${health.reason}`;
    const action = this.recoveryActions.get(recoveryKey);

    if (!action) {
      console.log(`No auto-recovery action for ${recoveryKey}`);
      return false;
    }

    try {
      console.log(`Attempting auto-recovery: ${action.name}`);
      await action.execute();

      // ë³µêµ¬ í™•ì¸
      await this.sleep(10000);
      const newHealth = await this.checkHealth(service,
        this.healthChecks.get(service)
      );

      if (newHealth.healthy) {
        console.log(`Auto-recovery successful for ${service}`);
        await this.notifyRecovery(service, action);
        return true;
      }
    } catch (error) {
      console.error(`Auto-recovery failed: ${error}`);
    }

    return false;
  }

  // ì‚¬ìš© ì˜ˆì‹œ: ìë™ ë³µêµ¬ ì•¡ì…˜ ì„¤ì •
  setupAutoRecovery() {
    // API ì„œë²„ ì¬ì‹œì‘
    this.registerRecoveryAction('api:Health check failed', {
      name: 'Restart API Server',
      execute: async () => {
        await exec('pm2 restart api-server');
      }
    });

    // ë°ì´í„°ë² ì´ìŠ¤ ì—°ê²° í’€ ë¦¬ì…‹
    this.registerRecoveryAction('database:connection_pool_exhausted', {
      name: 'Reset Connection Pool',
      execute: async () => {
        await this.database.pool.clear();
        await this.database.pool.initialize();
      }
    });

    // ìºì‹œ ì„œë²„ í”ŒëŸ¬ì‹œ
    this.registerRecoveryAction('cache:memory_exceeded', {
      name: 'Flush Cache',
      execute: async () => {
        await this.cache.flushAll();
        await this.cache.warmUp(['trending', 'popular']);
      }
    });

    // ì˜¤í† ìŠ¤ì¼€ì¼ë§ íŠ¸ë¦¬ê±°
    this.registerRecoveryAction('api:response_time_high', {
      name: 'Scale Out',
      execute: async () => {
        const currentInstances = await this.getInstanceCount();
        await this.scaleInstances(currentInstances + 2);
      }
    });
  }
}

```

## 14.3 ì‚¬ìš©ì ì§€ì› ê°€ì´ë“œ

### ì§€ì› í‹°ì¼“ ì²˜ë¦¬ í”„ë¡œì„¸ìŠ¤

### í‹°ì¼“ ë¶„ë¥˜ ë° ë¼ìš°íŒ…

```jsx
// ì§€ì› í‹°ì¼“ ê´€ë¦¬ ì‹œìŠ¤í…œ
class SupportTicketSystem {
  constructor() {
    this.categories = {
      account: {
        keywords: ['ë¡œê·¸ì¸', 'ë¹„ë°€ë²ˆí˜¸', 'ê³„ì •', 'ê°€ì…'],
        team: 'Account Support',
        templates: new Map()
      },
      billing: {
        keywords: ['ê²°ì œ', 'í™˜ë¶ˆ', 'êµ¬ë…', 'ìš”ê¸ˆ'],
        team: 'Billing Support',
        templates: new Map(),
        requiresAuth: true
      },
      technical: {
        keywords: ['ì˜¤ë¥˜', 'ë²„ê·¸', 'ì‘ë™', 'ëŠë¦¼'],
        team: 'Technical Support',
        templates: new Map()
      },
      feature: {
        keywords: ['ì œì•ˆ', 'ê¸°ëŠ¥', 'ê°œì„ ', 'ì¶”ê°€'],
        team: 'Product Team',
        templates: new Map()
      }
    };

    this.initializeTemplates();
  }

  // ì‘ë‹µ í…œí”Œë¦¿ ì´ˆê¸°í™”
  initializeTemplates() {
    // ê³„ì • ê´€ë ¨ í…œí”Œë¦¿
    this.categories.account.templates.set('password_reset', {
      subject: 'ë¹„ë°€ë²ˆí˜¸ ì¬ì„¤ì • ì•ˆë‚´',
      body: `ì•ˆë…•í•˜ì„¸ìš” {{user_name}}ë‹˜,

ë¹„ë°€ë²ˆí˜¸ ì¬ì„¤ì •ì„ ìš”ì²­í•˜ì…¨ìŠµë‹ˆë‹¤.

ì•„ë˜ ë§í¬ë¥¼ í´ë¦­í•˜ì—¬ ìƒˆë¡œìš´ ë¹„ë°€ë²ˆí˜¸ë¥¼ ì„¤ì •í•´ì£¼ì„¸ìš”:
{{reset_link}}

ì´ ë§í¬ëŠ” 24ì‹œê°„ ë™ì•ˆ ìœ íš¨í•©ë‹ˆë‹¤.

ë³¸ì¸ì´ ìš”ì²­í•˜ì§€ ì•Šìœ¼ì…¨ë‹¤ë©´ ì´ ì´ë©”ì¼ì„ ë¬´ì‹œí•´ì£¼ì„¸ìš”.

ê°ì‚¬í•©ë‹ˆë‹¤.
YouTube Shorts íë ˆì´ì…˜ íŒ€`
    });

    this.categories.account.templates.set('login_issue', {
      subject: 'ë¡œê·¸ì¸ ë¬¸ì œ í•´ê²° ë°©ë²•',
      body: `ì•ˆë…•í•˜ì„¸ìš” {{user_name}}ë‹˜,

ë¡œê·¸ì¸ì— ë¬¸ì œê°€ ìˆìœ¼ì‹  ê²ƒ ê°™ìŠµë‹ˆë‹¤. ë‹¤ìŒ ë‹¨ê³„ë¥¼ ì‹œë„í•´ë³´ì„¸ìš”:

1. **ë¸Œë¼ìš°ì € ìºì‹œ ì‚­ì œ**
   - Chrome: ì„¤ì • > ê°œì¸ì •ë³´ ë³´í˜¸ ë° ë³´ì•ˆ > ì¸í„°ë„· ì‚¬ìš© ê¸°ë¡ ì‚­ì œ
   - Safari: ê°œë°œì ë„êµ¬ > ìºì‹œ ë¹„ìš°ê¸°

2. **ì¿ í‚¤ í™•ì¸**
   - ìš°ë¦¬ ì‚¬ì´íŠ¸ì˜ ì¿ í‚¤ê°€ ì°¨ë‹¨ë˜ì–´ ìˆì§€ ì•Šì€ì§€ í™•ì¸

3. **ë‹¤ë¥¸ ë¸Œë¼ìš°ì € ì‹œë„**
   - ë¬¸ì œê°€ ì§€ì†ë˜ë©´ ë‹¤ë¥¸ ë¸Œë¼ìš°ì €ë¡œ ì‹œë„

4. **ë¹„ë°€ë²ˆí˜¸ ì¬ì„¤ì •**
   - ì—¬ì „íˆ ë¡œê·¸ì¸í•  ìˆ˜ ì—†ë‹¤ë©´ ë¹„ë°€ë²ˆí˜¸ë¥¼ ì¬ì„¤ì •í•´ë³´ì„¸ìš”

ì¶”ê°€ ë„ì›€ì´ í•„ìš”í•˜ì‹œë©´ ë‹¤ìŒ ì •ë³´ì™€ í•¨ê»˜ íšŒì‹ í•´ì£¼ì„¸ìš”:
- ì‚¬ìš© ì¤‘ì¸ ë¸Œë¼ìš°ì € ë° ë²„ì „
- ì˜¤ë¥˜ ë©”ì‹œì§€ ìŠ¤í¬ë¦°ìƒ·
- ë¬¸ì œ ë°œìƒ ì‹œê°„

ê°ì‚¬í•©ë‹ˆë‹¤.`
    });

    // ê¸°ìˆ  ì§€ì› í…œí”Œë¦¿
    this.categories.technical.templates.set('video_playback', {
      subject: 'ì˜ìƒ ì¬ìƒ ë¬¸ì œ í•´ê²°',
      body: `ì•ˆë…•í•˜ì„¸ìš” {{user_name}}ë‹˜,

ì˜ìƒ ì¬ìƒì— ë¬¸ì œê°€ ìˆë‹¤ê³  ì•Œë ¤ì£¼ì…¨ìŠµë‹ˆë‹¤.

**ì¦‰ì‹œ ì‹œë„í•´ë³¼ ìˆ˜ ìˆëŠ” í•´ê²° ë°©ë²•:**

1. **ì¸í„°ë„· ì—°ê²° í™•ì¸**
   - WiFi ë˜ëŠ” ëª¨ë°”ì¼ ë°ì´í„° ì—°ê²° ìƒíƒœ í™•ì¸
   - ë‹¤ë¥¸ ì›¹ì‚¬ì´íŠ¸ëŠ” ì •ìƒì ìœ¼ë¡œ ë¡œë“œë˜ëŠ”ì§€ í™•ì¸

2. **ë¸Œë¼ìš°ì € ì—…ë°ì´íŠ¸**
   - ìµœì‹  ë²„ì „ì˜ ë¸Œë¼ìš°ì €ë¥¼ ì‚¬ìš© ì¤‘ì¸ì§€ í™•ì¸

3. **í™•ì¥ í”„ë¡œê·¸ë¨ ë¹„í™œì„±í™”**
   - ê´‘ê³  ì°¨ë‹¨ê¸°ë‚˜ ë‹¤ë¥¸ í™•ì¥ í”„ë¡œê·¸ë¨ì´ ì˜í–¥ì„ ì¤„ ìˆ˜ ìˆìŠµë‹ˆë‹¤

4. **ì‹œí¬ë¦¿/í”„ë¼ì´ë¹— ëª¨ë“œë¡œ ì‹œë„**

ë¬¸ì œê°€ ì§€ì†ë˜ë©´ ë‹¤ìŒ ì •ë³´ë¥¼ ë³´ë‚´ì£¼ì„¸ìš”:
- ë¬¸ì œê°€ ë°œìƒí•˜ëŠ” ì˜ìƒ ë§í¬
- ì˜¤ë¥˜ ë©”ì‹œì§€
- ë””ë°”ì´ìŠ¤ ì •ë³´ (ëª¨ë¸, OS ë²„ì „)

24ì‹œê°„ ë‚´ì— ë‹¤ì‹œ ì—°ë½ë“œë¦¬ê² ìŠµë‹ˆë‹¤.`
    });

    // ê²°ì œ ê´€ë ¨ í…œí”Œë¦¿
    this.categories.billing.templates.set('refund_request', {
      subject: 'í™˜ë¶ˆ ìš”ì²­ ì ‘ìˆ˜ í™•ì¸',
      body: `ì•ˆë…•í•˜ì„¸ìš” {{user_name}}ë‹˜,

í™˜ë¶ˆ ìš”ì²­ì„ ì ‘ìˆ˜í–ˆìŠµë‹ˆë‹¤.

**ìš”ì²­ ì •ë³´:**
- ì£¼ë¬¸ ë²ˆí˜¸: {{order_id}}
- ê²°ì œ ê¸ˆì•¡: {{amount}}
- ìš”ì²­ ì‚¬ìœ : {{reason}}

**ì²˜ë¦¬ ì ˆì°¨:**
1. ìš”ì²­ ê²€í†  (1-2 ì˜ì—…ì¼)
2. ìŠ¹ì¸ ì‹œ í™˜ë¶ˆ ì²˜ë¦¬ (3-5 ì˜ì—…ì¼)
3. í™˜ë¶ˆ ì™„ë£Œ ì•Œë¦¼

í™˜ë¶ˆì€ ì›ë˜ ê²°ì œ ìˆ˜ë‹¨ìœ¼ë¡œ ì²˜ë¦¬ë˜ë©°, ì¹´ë“œì‚¬ì— ë”°ë¼
ì‹¤ì œ ë°˜ì˜ê¹Œì§€ ì¶”ê°€ë¡œ 2-3ì¼ì´ ì†Œìš”ë  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

ë¬¸ì˜ì‚¬í•­ì´ ìˆìœ¼ì‹œë©´ ì´ ì´ë©”ì¼ì— íšŒì‹ í•´ì£¼ì„¸ìš”.

ê°ì‚¬í•©ë‹ˆë‹¤.`
    });
  }

  // í‹°ì¼“ ìë™ ë¶„ë¥˜
  async categorizeTicket(ticket) {
    const content = `${ticket.subject} ${ticket.body}`.toLowerCase();
    let bestMatch = { category: 'general', score: 0 };

    for (const [category, config] of Object.entries(this.categories)) {
      const score = config.keywords.reduce((sum, keyword) => {
        return sum + (content.includes(keyword) ? 1 : 0);
      }, 0);

      if (score > bestMatch.score) {
        bestMatch = { category, score };
      }
    }

    // AI ê¸°ë°˜ ë¶„ë¥˜ (MCP í™œìš©)
    if (bestMatch.score < 2) {
      const aiCategory = await this.classifyWithAI(ticket);
      if (aiCategory) {
        bestMatch.category = aiCategory;
      }
    }

    return bestMatch.category;
  }

  // ìë™ ì‘ë‹µ ìƒì„±
  async generateResponse(ticket, category) {
    const templates = this.categories[category].templates;

    // í…œí”Œë¦¿ ë§¤ì¹­
    for (const [templateId, template] of templates) {
      if (this.matchesTemplate(ticket, templateId)) {
        return this.fillTemplate(template, ticket);
      }
    }

    // í…œí”Œë¦¿ì´ ì—†ìœ¼ë©´ AI ì‘ë‹µ ìƒì„±
    return await this.generateAIResponse(ticket);
  }

  // ì—ìŠ¤ì»¬ë ˆì´ì…˜ ê·œì¹™
  shouldEscalate(ticket) {
    const rules = [
      {
        condition: ticket.priority === 'urgent',
        escalateTo: 'Team Lead',
        reason: 'Urgent priority'
      },
      {
        condition: ticket.responseTime > 24 * 60 * 60 * 1000,
        escalateTo: 'Manager',
        reason: 'SLA breach'
      },
      {
        condition: ticket.sentiment < -0.5,
        escalateTo: 'Senior Agent',
        reason: 'Very negative sentiment'
      },
      {
        condition: ticket.customerTier === 'premium' &&
                  ticket.responseTime > 4 * 60 * 60 * 1000,
        escalateTo: 'Premium Support Lead',
        reason: 'Premium customer waiting'
      }
    ];

    for (const rule of rules) {
      if (rule.condition) {
        return rule;
      }
    }

    return null;
  }
}

```

### ì¼ë°˜ì ì¸ ë¬¸ì œ í•´ê²° ê°€ì´ë“œ

### FAQ ë° íŠ¸ëŸ¬ë¸”ìŠˆíŒ…

```jsx
const troubleshootingGuide = {
  categories: [
    {
      title: "ë¡œê·¸ì¸/ê³„ì • ë¬¸ì œ",
      issues: [
        {
          problem: "ë¡œê·¸ì¸í•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤",
          solutions: [
            {
              step: 1,
              action: "ì´ë©”ì¼ ì£¼ì†Œ í™•ì¸",
              details: "ê°€ì… ì‹œ ì‚¬ìš©í•œ ì •í™•í•œ ì´ë©”ì¼ ì£¼ì†Œì¸ì§€ í™•ì¸í•˜ì„¸ìš”."
            },
            {
              step: 2,
              action: "ë¹„ë°€ë²ˆí˜¸ ì¬ì„¤ì •",
              details: "ë¡œê·¸ì¸ í˜ì´ì§€ì—ì„œ 'ë¹„ë°€ë²ˆí˜¸ë¥¼ ìŠìœ¼ì…¨ë‚˜ìš”?' í´ë¦­",
              link: "/auth/reset-password"
            },
            {
              step: 3,
              action: "ë¸Œë¼ìš°ì € ì¿ í‚¤ ì‚­ì œ",
              details: "ë¸Œë¼ìš°ì € ì„¤ì •ì—ì„œ ì¿ í‚¤ì™€ ìºì‹œë¥¼ ì‚­ì œí•˜ê³  ë‹¤ì‹œ ì‹œë„"
            }
          ],
          additionalInfo: "ê·¸ë˜ë„ ë¬¸ì œê°€ í•´ê²°ë˜ì§€ ì•Šìœ¼ë©´ support@yourservice.comìœ¼ë¡œ ë¬¸ì˜"
        },
        {
          problem: "ì´ë©”ì¼ ì¸ì¦ì„ ë°›ì§€ ëª»í–ˆìŠµë‹ˆë‹¤",
          solutions: [
            {
              step: 1,
              action: "ìŠ¤íŒ¸ í´ë” í™•ì¸",
              details: "ì¸ì¦ ì´ë©”ì¼ì´ ìŠ¤íŒ¸ í´ë”ì— ìˆì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤"
            },
            {
              step: 2,
              action: "ì´ë©”ì¼ ì¬ë°œì†¡",
              details: "í”„ë¡œí•„ ì„¤ì •ì—ì„œ 'ì¸ì¦ ì´ë©”ì¼ ì¬ë°œì†¡' í´ë¦­"
            },
            {
              step: 3,
              action: "ì´ë©”ì¼ ì£¼ì†Œ í™•ì¸",
              details: "ë“±ë¡ëœ ì´ë©”ì¼ ì£¼ì†Œê°€ ì •í™•í•œì§€ í™•ì¸"
            }
          ]
        }
      ]
    },
    {
      title: "ì˜ìƒ ì¬ìƒ ë¬¸ì œ",
      issues: [
        {
          problem: "ì˜ìƒì´ ë¡œë“œë˜ì§€ ì•ŠìŠµë‹ˆë‹¤",
          solutions: [
            {
              step: 1,
              action: "ì¸í„°ë„· ì—°ê²° í™•ì¸",
              details: "ì•ˆì •ì ì¸ ì¸í„°ë„· ì—°ê²°ì´ í•„ìš”í•©ë‹ˆë‹¤ (ìµœì†Œ 5Mbps)",
              diagnostic: "speedtest.netì—ì„œ ì†ë„ í…ŒìŠ¤íŠ¸"
            },
            {
              step: 2,
              action: "ë¸Œë¼ìš°ì € í˜¸í™˜ì„±",
              details: "Chrome, Firefox, Safari, Edge ìµœì‹  ë²„ì „ ì‚¬ìš© ê¶Œì¥",
              supportedVersions: {
                Chrome: "100+",
                Firefox: "100+",
                Safari: "15+",
                Edge: "100+"
              }
            },
            {
              step: 3,
              action: "í•˜ë“œì›¨ì–´ ê°€ì† ì„¤ì •",
              details: "ë¸Œë¼ìš°ì € ì„¤ì •ì—ì„œ í•˜ë“œì›¨ì–´ ê°€ì† í™œì„±í™”"
            }
          ]
        },
        {
          problem: "ì˜ìƒì´ ë²„í¼ë§ë©ë‹ˆë‹¤",
          solutions: [
            {
              step: 1,
              action: "í™”ì§ˆ ë‚®ì¶”ê¸°",
              details: "í”Œë ˆì´ì–´ ì„¤ì •ì—ì„œ í™”ì§ˆì„ 720p ë˜ëŠ” 480pë¡œ ë³€ê²½"
            },
            {
              step: 2,
              action: "ë‹¤ë¥¸ ì•± ì¢…ë£Œ",
              details: "ë°±ê·¸ë¼ìš´ë“œì—ì„œ ì‹¤í–‰ ì¤‘ì¸ ë‹¤ë¥¸ ì•± ì¢…ë£Œ"
            },
            {
              step: 3,
              action: "CDN ì„œë²„ ë³€ê²½",
              details: "ì„¤ì • > ê³ ê¸‰ > CDN ì§€ì—­ ë³€ê²½"
            }
          ]
        }
      ]
    },
    {
      title: "ê²°ì œ ë° êµ¬ë…",
      issues: [
        {
          problem: "ê²°ì œê°€ ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤",
          solutions: [
            {
              step: 1,
              action: "ì¹´ë“œ ì •ë³´ í™•ì¸",
              details: "ì¹´ë“œ ë²ˆí˜¸, ë§Œë£Œì¼, CVVê°€ ì •í™•í•œì§€ í™•ì¸"
            },
            {
              step: 2,
              action: "ì¹´ë“œ í•œë„ í™•ì¸",
              details: "ì¹´ë“œì‚¬ì— í•´ì™¸ ê²°ì œ ì°¨ë‹¨ ì—¬ë¶€ í™•ì¸"
            },
            {
              step: 3,
              action: "ë‹¤ë¥¸ ê²°ì œ ìˆ˜ë‹¨",
              details: "PayPal, Google Pay ë“± ë‹¤ë¥¸ ê²°ì œ ë°©ë²• ì‹œë„"
            }
          ],
          errorCodes: {
            "CARD_DECLINED": "ì¹´ë“œê°€ ê±°ì ˆë˜ì—ˆìŠµë‹ˆë‹¤. ì¹´ë“œì‚¬ì— ë¬¸ì˜í•˜ì„¸ìš”.",
            "INSUFFICIENT_FUNDS": "ì”ì•¡ì´ ë¶€ì¡±í•©ë‹ˆë‹¤.",
            "INVALID_CVV": "CVV ì½”ë“œê°€ ì˜¬ë°”ë¥´ì§€ ì•ŠìŠµë‹ˆë‹¤."
          }
        },
        {
          problem: "êµ¬ë…ì„ ì·¨ì†Œí•˜ê³  ì‹¶ìŠµë‹ˆë‹¤",
          solutions: [
            {
              step: 1,
              action: "í”„ë¡œí•„ ì„¤ì • ì ‘ì†",
              details: "ìš°ì¸¡ ìƒë‹¨ í”„ë¡œí•„ ì•„ì´ì½˜ > ì„¤ì •"
            },
            {
              step: 2,
              action: "êµ¬ë… ê´€ë¦¬",
              details: "ê²°ì œ ë° êµ¬ë… > êµ¬ë… ê´€ë¦¬ í´ë¦­"
            },
            {
              step: 3,
              action: "êµ¬ë… ì·¨ì†Œ",
              details: "'êµ¬ë… ì·¨ì†Œ' ë²„íŠ¼ í´ë¦­ > ì‚¬ìœ  ì„ íƒ"
            }
          ],
          important: "í˜„ì¬ êµ¬ë… ê¸°ê°„ì´ ëë‚  ë•Œê¹Œì§€ ì„œë¹„ìŠ¤ ì´ìš© ê°€ëŠ¥"
        }
      ]
    }
  ],

  // ì§„ë‹¨ ë„êµ¬
  diagnosticTools: {
    connectivityTest: {
      name: "ì—°ê²° í…ŒìŠ¤íŠ¸",
      command: `
// ë¸Œë¼ìš°ì € ì½˜ì†”ì—ì„œ ì‹¤í–‰
(async () => {
  const tests = {
    api: 'https://api.yourservice.com/health',
    cdn: 'https://cdn.yourservice.com/test.txt',
    youtube: 'https://www.youtube.com/iframe_api'
  };

  for (const [service, url] of Object.entries(tests)) {
    try {
      const start = Date.now();
      const response = await fetch(url);
      const time = Date.now() - start;
      console.log(\`âœ… \${service}: \${response.status} (\${time}ms)\`);
    } catch (error) {
      console.error(\`âŒ \${service}: \${error.message}\`);
    }
  }
})();
      `
    },

    performanceCheck: {
      name: "ì„±ëŠ¥ ì²´í¬",
      command: `
// í˜ì´ì§€ ë¡œë“œ ì„±ëŠ¥ í™•ì¸
console.table({
  'DOM ë¡œë“œ': performance.timing.domContentLoadedEventEnd - performance.timing.navigationStart,
  'ì „ì²´ ë¡œë“œ': performance.timing.loadEventEnd - performance.timing.navigationStart,
  'First Paint': performance.getEntriesByType('paint')[0]?.startTime,
  'First Contentful Paint': performance.getEntriesByType('paint')[1]?.startTime
});
      `
    }
  }
};

```

### ì‚¬ìš©ì ì»¤ë®¤ë‹ˆì¼€ì´ì…˜ ê°€ì´ë“œ

### í†¤ ì•¤ ë§¤ë„ˆ ê°€ì´ë“œë¼ì¸

```jsx
const communicationGuidelines = {
  principles: [
    {
      principle: "ì¹œê·¼í•˜ê³  ì „ë¬¸ì ì¸",
      do: [
        "ì•ˆë…•í•˜ì„¸ìš”! ë„ì›€ì´ í•„ìš”í•˜ì‹ ê°€ìš”?",
        "ë¬¸ì œë¥¼ í•´ê²°í•´ë“œë¦´ê²Œìš”.",
        "ì¶”ê°€ ì§ˆë¬¸ì´ ìˆìœ¼ì‹œë©´ ì–¸ì œë“ ì§€ ë¬¸ì˜í•´ì£¼ì„¸ìš”."
      ],
      dont: [
        "ë­ê°€ ë¬¸ì œì„?",
        "ê·¸ê±´ ìš°ë¦¬ ì˜ëª»ì´ ì•„ë‹™ë‹ˆë‹¤.",
        "ë©”ë‰´ì–¼ì„ ì½ì–´ë³´ì„¸ìš”."
      ]
    },
    {
      principle: "ê³µê°ê³¼ ì´í•´",
      do: [
        "ë¶ˆí¸ì„ ë“œë ¤ ì£„ì†¡í•©ë‹ˆë‹¤.",
        "ë‹µë‹µí•˜ì…¨ê² ë„¤ìš”. ë°”ë¡œ í™•ì¸í•´ë³´ê² ìŠµë‹ˆë‹¤.",
        "ì¢‹ì€ ì œì•ˆ ê°ì‚¬í•©ë‹ˆë‹¤!"
      ],
      dont: [
        "ê·¸ëŸ° ì¼ì€ ì—†ì„ í…ë°ìš”.",
        "ë‹¤ë¥¸ ì‚¬ìš©ìëŠ” ë¬¸ì œì—†ì´ ì‚¬ìš©í•˜ê³  ìˆìŠµë‹ˆë‹¤.",
        "ì‚¬ìš©ë²•ì´ í‹€ë ¸ìŠµë‹ˆë‹¤."
      ]
    },
    {
      principle: "ëª…í™•í•˜ê³  êµ¬ì²´ì ì¸",
      do: [
        "ë‹¤ìŒ 3ë‹¨ê³„ë¥¼ ë”°ë¼í•´ì£¼ì„¸ìš”:",
        "ì´ ë¬¸ì œëŠ” ë³´í†µ 24ì‹œê°„ ë‚´ì— í•´ê²°ë©ë‹ˆë‹¤.",
        "Chrome ë¸Œë¼ìš°ì € ë²„ì „ 100 ì´ìƒì—ì„œ ê°€ì¥ ì˜ ì‘ë™í•©ë‹ˆë‹¤."
      ],
      dont: [
        "ê³§ í•´ê²°ë  ê²ë‹ˆë‹¤.",
        "ì—¬ëŸ¬ ê°€ì§€ ë°©ë²•ì„ ì‹œë„í•´ë³´ì„¸ìš”.",
        "ìµœì‹  ë¸Œë¼ìš°ì €ë¥¼ ì‚¬ìš©í•˜ì„¸ìš”."
      ]
    }
  ],

  responseTemplates: {
    greeting: {
      firstContact: "ì•ˆë…•í•˜ì„¸ìš”! YouTube Shorts íë ˆì´ì…˜ ì„œë¹„ìŠ¤ì…ë‹ˆë‹¤. ì–´ë–¤ ë„ì›€ì´ í•„ìš”í•˜ì‹ ê°€ìš”?",
      returning: "ë‹¤ì‹œ ì—°ë½ì£¼ì…”ì„œ ê°ì‚¬í•©ë‹ˆë‹¤. ì´ì „ ë¬¸ì œê°€ í•´ê²°ë˜ì…¨ë‚˜ìš”?",
      followUp: "ì•ˆë…•í•˜ì„¸ìš”, {{name}}ë‹˜. ì§€ë‚œë²ˆ ë¬¸ì˜í•˜ì‹  {{issue}}ì— ëŒ€í•´ ì¶”ê°€ ë„ì›€ì´ í•„ìš”í•˜ì‹ ê°€ìš”?"
    },

    problemAcknowledgment: {
      technical: "ê¸°ìˆ ì ì¸ ë¬¸ì œë¡œ ë¶ˆí¸ì„ ë“œë ¤ ì£„ì†¡í•©ë‹ˆë‹¤. ë°”ë¡œ í™•ì¸í•´ë³´ê² ìŠµë‹ˆë‹¤.",
      billing: "ê²°ì œ ê´€ë ¨ ë¬¸ì œëŠ” ì‹ ì¤‘íˆ ì²˜ë¦¬í•˜ê² ìŠµë‹ˆë‹¤. ìì„¸í•œ ì •ë³´ë¥¼ í™•ì¸í•˜ëŠ” ë™ì•ˆ ì ì‹œë§Œ ê¸°ë‹¤ë ¤ì£¼ì„¸ìš”.",
      feature: "ì¢‹ì€ ì•„ì´ë””ì–´ ê°ì‚¬í•©ë‹ˆë‹¤! ì œí’ˆíŒ€ê³¼ ê³µìœ í•˜ì—¬ ê²€í† í•˜ê² ìŠµë‹ˆë‹¤."
    },

    resolution: {
      solved: "ë¬¸ì œê°€ í•´ê²°ë˜ì–´ ê¸°ì©ë‹ˆë‹¤! ë‹¤ë¥¸ ë„ì›€ì´ í•„ìš”í•˜ì‹œë©´ ì–¸ì œë“ ì§€ ë¬¸ì˜í•´ì£¼ì„¸ìš”.",
      partial: "ì„ì‹œ í•´ê²° ë°©ë²•ì„ ì œê³µí•´ë“œë ¸ìŠµë‹ˆë‹¤. ì™„ì „í•œ í•´ê²°ì„ ìœ„í•´ ê³„ì† ë…¸ë ¥í•˜ê² ìŠµë‹ˆë‹¤.",
      escalated: "ì´ ë¬¸ì œëŠ” ì „ë¬¸íŒ€ì—ì„œ ê²€í† ê°€ í•„ìš”í•©ë‹ˆë‹¤. {{timeframe}} ë‚´ì— ë‹¤ì‹œ ì—°ë½ë“œë¦¬ê² ìŠµë‹ˆë‹¤."
    },

    closing: {
      satisfied: "ë„ì›€ì´ ë˜ì—ˆë‹¤ë‹ˆ ê¸°ì©ë‹ˆë‹¤! ì¢‹ì€ í•˜ë£¨ ë³´ë‚´ì„¸ìš” ğŸ˜Š",
      neutral: "ì¶”ê°€ ì§ˆë¬¸ì´ ìˆìœ¼ì‹œë©´ ì–¸ì œë“ ì§€ ë¬¸ì˜í•´ì£¼ì„¸ìš”.",
      dissatisfied: "ë§Œì¡±ìŠ¤ëŸ¬ìš´ í•´ê²°ì±…ì„ ì œê³µí•˜ì§€ ëª»í•´ ì£„ì†¡í•©ë‹ˆë‹¤. ê°œì„ í•  ìˆ˜ ìˆë„ë¡ ë…¸ë ¥í•˜ê² ìŠµë‹ˆë‹¤."
    }
  },

  // ì´ëª¨ì§€ ì‚¬ìš© ê°€ì´ë“œ
  emojiUsage: {
    appropriate: ["ğŸ˜Š", "ğŸ‘", "âœ…", "ğŸ’¡", "ğŸ‰", "âš¡"],
    contexts: {
      success: "âœ… í•´ê²°ë˜ì—ˆìŠµë‹ˆë‹¤!",
      idea: "ğŸ’¡ íŒ: ~",
      celebration: "ğŸ‰ ì¶•í•˜í•©ë‹ˆë‹¤!",
      fast: "âš¡ ë¹ ë¥¸ í•´ê²° ë°©ë²•"
    },
    avoid: ["ğŸ˜¡", "ğŸ˜­", "ğŸ¤¬", "ğŸ’©", "ğŸ™„"]
  }
};

```

## 14.4 ì„±ëŠ¥ íŠœë‹ ê°€ì´ë“œ

### ë°ì´í„°ë² ì´ìŠ¤ ìµœì í™”

### ì¿¼ë¦¬ ì„±ëŠ¥ ë¶„ì„ ë° ê°œì„ 

```sql
-- ëŠë¦° ì¿¼ë¦¬ ë¡œê·¸ ë¶„ì„
-- ì‹¤í–‰ ì‹œê°„ì´ 1ì´ˆ ì´ìƒì¸ ì¿¼ë¦¬ ì°¾ê¸°
SELECT
    query,
    calls,
    total_time,
    mean_time,
    max_time,
    stddev_time
FROM pg_stat_statements
WHERE mean_time > 1000  -- 1ì´ˆ ì´ìƒ
ORDER BY mean_time DESC
LIMIT 20;

-- ì¸ë±ìŠ¤ ì‚¬ìš©ë¥  í™•ì¸
SELECT
    schemaname,
    tablename,
    indexname,
    idx_scan,
    idx_tup_read,
    idx_tup_fetch,
    pg_size_pretty(pg_relation_size(indexrelid)) as index_size
FROM pg_stat_user_indexes
ORDER BY idx_scan ASC;

-- í…Œì´ë¸” ë¸”ë¡œíŠ¸ í™•ì¸
WITH constants AS (
    SELECT current_setting('block_size')::numeric AS bs, 23 AS hdr, 8 AS ma
),
no_stats AS (
    SELECT table_schema, table_name,
        n_live_tup::numeric as est_rows,
        pg_table_size(relid)::numeric as table_size
    FROM information_schema.columns
        JOIN pg_stat_user_tables as psut
           ON table_schema = psut.schemaname
           AND table_name = psut.relname
        LEFT OUTER JOIN pg_stats
        ON table_schema = pg_stats.schemaname
            AND table_name = pg_stats.tablename
            AND column_name = attname
    WHERE attname IS NULL
        AND table_schema NOT IN ('pg_catalog', 'information_schema')
    GROUP BY table_schema, table_name, relid, n_live_tup
)
SELECT
    table_schema,
    table_name,
    pg_size_pretty(table_size) AS table_size,
    pg_size_pretty((table_size - (ceil(est_rows * 40))::bigint)) AS bloat_size,
    round((table_size - (ceil(est_rows * 40))::numeric) / table_size * 100, 1) AS bloat_ratio
FROM no_stats
WHERE table_size > 1024*1024*10  -- 10MB ì´ìƒ í…Œì´ë¸”ë§Œ
ORDER BY bloat_ratio DESC;

```

### ìë™ ìµœì í™” ìŠ¤í¬ë¦½íŠ¸

```jsx
// ë°ì´í„°ë² ì´ìŠ¤ ì„±ëŠ¥ íŠœë„ˆ
class DatabasePerformanceTuner {
  constructor(dbConnection) {
    this.db = dbConnection;
    this.recommendations = [];
  }

  async analyzePerfomance() {
    const report = {
      timestamp: new Date(),
      issues: [],
      recommendations: []
    };

    // 1. ëŠë¦° ì¿¼ë¦¬ ë¶„ì„
    const slowQueries = await this.findSlowQueries();
    if (slowQueries.length > 0) {
      report.issues.push({
        type: 'SLOW_QUERIES',
        severity: 'HIGH',
        details: slowQueries,
        recommendation: await this.generateQueryOptimizations(slowQueries)
      });
    }

    // 2. ì¸ë±ìŠ¤ ë¶„ì„
    const indexIssues = await this.analyzeIndexes();
    if (indexIssues.missing.length > 0) {
      report.issues.push({
        type: 'MISSING_INDEXES',
        severity: 'MEDIUM',
        details: indexIssues.missing,
        recommendation: this.generateIndexCommands(indexIssues.missing)
      });
    }

    // 3. í…Œì´ë¸” í†µê³„ ë¶„ì„
    const staleStats = await this.checkTableStatistics();
    if (staleStats.length > 0) {
      report.issues.push({
        type: 'STALE_STATISTICS',
        severity: 'LOW',
        details: staleStats,
        recommendation: 'ANALYZE ' + staleStats.join(', ')
      });
    }

    // 4. ì—°ê²° í’€ ë¶„ì„
    const connectionPool = await this.analyzeConnectionPool();
    if (connectionPool.utilization > 80) {
      report.issues.push({
        type: 'CONNECTION_POOL_HIGH',
        severity: 'HIGH',
        details: connectionPool,
        recommendation: 'Increase max_connections or optimize connection usage'
      });
    }

    return report;
  }

  // ëŠë¦° ì¿¼ë¦¬ ì°¾ê¸°
  async findSlowQueries() {
    const query = `
      SELECT
        query,
        calls,
        total_time,
        mean_time,
        max_time
      FROM pg_stat_statements
      WHERE mean_time > 1000
      ORDER BY mean_time DESC
      LIMIT 10
    `;

    const results = await this.db.query(query);
    return results.rows.map(row => ({
      query: this.normalizeQuery(row.query),
      calls: row.calls,
      avgTime: row.mean_time,
      totalTime: row.total_time,
      optimization: this.suggestQueryOptimization(row.query)
    }));
  }

  // ì¿¼ë¦¬ ìµœì í™” ì œì•ˆ
  suggestQueryOptimization(query) {
    const suggestions = [];

    // SELECT * ê²€ì‚¬
    if (query.includes('SELECT *')) {
      suggestions.push('íŠ¹ì • ì»¬ëŸ¼ë§Œ ì„ íƒí•˜ë„ë¡ ë³€ê²½');
    }

    // JOIN ì—†ëŠ” ì—¬ëŸ¬ í…Œì´ë¸” ê²€ì‚¬
    if (query.match(/FROM\s+\w+\s*,\s*\w+/i)) {
      suggestions.push('ëª…ì‹œì  JOIN ì‚¬ìš© ê¶Œì¥');
    }

    // LIKE '%...' ê²€ì‚¬
    if (query.match(/LIKE\s+'%[^']+'/i)) {
      suggestions.push('ì „ì²´ í…ìŠ¤íŠ¸ ê²€ìƒ‰ ë˜ëŠ” trigram ì¸ë±ìŠ¤ ê³ ë ¤');
    }

    // ORDER BY RANDOM() ê²€ì‚¬
    if (query.includes('RANDOM()')) {
      suggestions.push('TABLESAMPLE ë˜ëŠ” ì‚¬ì „ ê³„ì‚°ëœ ëœë¤ ê°’ ì‚¬ìš©');
    }

    return suggestions;
  }
}

```

### ì• í”Œë¦¬ì¼€ì´ì…˜ ì„±ëŠ¥ ìµœì í™”

### Node.js ì„±ëŠ¥ íŠœë‹

```jsx
// ì„±ëŠ¥ ëª¨ë‹ˆí„°ë§ ë° ìµœì í™”
class ApplicationPerformanceMonitor {
  constructor() {
    this.metrics = {
      requests: new Map(),
      memory: [],
      cpu: [],
      eventLoop: []
    };

    this.startMonitoring();
  }

  startMonitoring() {
    // ë©”ëª¨ë¦¬ ì‚¬ìš©ëŸ‰ ì¶”ì 
    setInterval(() => {
      const memUsage = process.memoryUsage();
      this.metrics.memory.push({
        timestamp: Date.now(),
        heapUsed: memUsage.heapUsed,
        heapTotal: memUsage.heapTotal,
        external: memUsage.external,
        rss: memUsage.rss
      });

      // ë©”ëª¨ë¦¬ ëˆ„ìˆ˜ ê°ì§€
      if (this.detectMemoryLeak()) {
        this.handleMemoryLeak();
      }
    }, 60000); // 1ë¶„ë§ˆë‹¤

    // ì´ë²¤íŠ¸ ë£¨í”„ ì§€ì—° ì¸¡ì •
    let lastCheck = process.hrtime();
    setInterval(() => {
      const delay = process.hrtime(lastCheck);
      const delayMs = delay[0] * 1000 + delay[1] / 1000000 - 100;

      this.metrics.eventLoop.push({
        timestamp: Date.now(),
        delay: delayMs
      });

      if (delayMs > 50) {
        console.warn(`Event loop delay: ${delayMs}ms`);
      }

      lastCheck = process.hrtime();
    }, 100);
  }

  // ë©”ëª¨ë¦¬ ëˆ„ìˆ˜ ê°ì§€
  detectMemoryLeak() {
    if (this.metrics.memory.length < 10) return false;

    const recent = this.metrics.memory.slice(-10);
    const trend = this.calculateTrend(recent.map(m => m.heapUsed));

    // ì§€ì†ì ì¸ ì¦ê°€ ì¶”ì„¸
    return trend.slope > 1000000 && trend.r2 > 0.8; // 1MB/ë¶„ ì´ìƒ ì¦ê°€
  }

  // ë©”ëª¨ë¦¬ ëˆ„ìˆ˜ ëŒ€ì‘
  handleMemoryLeak() {
    console.error('Memory leak detected!');

    // í™ ìŠ¤ëƒ…ìƒ· ìƒì„±
    if (process.env.NODE_ENV === 'production') {
      const v8 = require('v8');
      const fs = require('fs');

      const snapshotFile = `/tmp/heap-${Date.now()}.heapsnapshot`;
      const snapshotStream = v8.getHeapSnapshot();
      const fileStream = fs.createWriteStream(snapshotFile);

      snapshotStream.pipe(fileStream);
      console.log(`Heap snapshot saved to ${snapshotFile}`);
    }

    // ê°€ë¹„ì§€ ì»¬ë ‰ì…˜ ê°•ì œ ì‹¤í–‰
    if (global.gc) {
      global.gc();
      console.log('Manual GC triggered');
    }

    // ì•Œë¦¼ ë°œì†¡
    this.sendAlert({
      level: 'CRITICAL',
      message: 'Memory leak detected',
      metrics: this.getMemoryMetrics()
    });
  }

  // API ì‘ë‹µ ì‹œê°„ ìµœì í™”
  optimizeRoutes() {
    return {
      // ì‘ë‹µ ì••ì¶•
      compression: {
        enable: true,
        options: {
          level: 6,
          threshold: 1024,
          filter: (req, res) => {
            if (req.headers['x-no-compression']) {
              return false;
            }
            return compression.filter(req, res);
          }
        }
      },

      // ìºì‹± í—¤ë”
      caching: {
        static: {
          maxAge: 86400 * 30, // 30ì¼
          immutable: true
        },
        api: {
          '/api/trending': 300, // 5ë¶„
          '/api/search': 3600, // 1ì‹œê°„
          '/api/user/*': 0 // ìºì‹œ ì•ˆí•¨
        }
      },

      // Rate limiting
      rateLimiting: {
        windowMs: 15 * 60 * 1000, // 15ë¶„
        max: {
          anonymous: 100,
          authenticated: 1000,
          premium: 5000
        },
        handler: (req, res) => {
          res.status(429).json({
            error: 'Too many requests',
            retryAfter: req.rateLimit.resetTime
          });
        }
      }
    };
  }
}

```

### í”„ë¡ íŠ¸ì—”ë“œ ì„±ëŠ¥ ìµœì í™”

### ë¡œë”© ì„±ëŠ¥ ê°œì„ 

```jsx
// í”„ë¡ íŠ¸ì—”ë“œ ì„±ëŠ¥ ìµœì í™” ìœ í‹¸ë¦¬í‹°
class FrontendPerformanceOptimizer {
  constructor() {
    this.metrics = {
      resources: new Map(),
      interactions: []
    };
  }

  // ì´ë¯¸ì§€ ìµœì í™”
  setupImageOptimization() {
    // Lazy loading
    if ('IntersectionObserver' in window) {
      const imageObserver = new IntersectionObserver((entries, observer) => {
        entries.forEach(entry => {
          if (entry.isIntersecting) {
            const img = entry.target;
            img.src = img.dataset.src;
            img.classList.remove('lazy');
            observer.unobserve(img);
          }
        });
      });

      document.querySelectorAll('img.lazy').forEach(img => {
        imageObserver.observe(img);
      });
    }

    // WebP ì§€ì› ì²´í¬
    const supportsWebP = () => {
      const canvas = document.createElement('canvas');
      canvas.width = 1;
      canvas.height = 1;
      return canvas.toDataURL('image/webp').indexOf('image/webp') === 0;
    };

    if (supportsWebP()) {
      document.documentElement.classList.add('webp');
    }
  }

  // ë¦¬ì†ŒìŠ¤ ìš°ì„ ìˆœìœ„ ì„¤ì •
  setPriorities() {
    // Critical CSS ì¸ë¼ì¸
    const criticalCSS = `
      /* ì´ˆê¸° ë Œë”ë§ì— í•„ìš”í•œ ìµœì†Œ CSS */
      body { margin: 0; font-family: system-ui; }
      .header { height: 60px; background: #fff; }
      .main { padding: 20px; }
      .loading { display: flex; justify-content: center; }
    `;

    const style = document.createElement('style');
    style.textContent = criticalCSS;
    document.head.insertBefore(style, document.head.firstChild);

    // ì¤‘ìš” ë¦¬ì†ŒìŠ¤ í”„ë¦¬ë¡œë“œ
    const preloads = [
      { href: '/api/trending', as: 'fetch' },
      { href: '/fonts/main.woff2', as: 'font', type: 'font/woff2' },
      { href: '/js/vendor.js', as: 'script' }
    ];

    preloads.forEach(({ href, as, type }) => {
      const link = document.createElement('link');
      link.rel = 'preload';
      link.href = href;
      link.as = as;
      if (type) link.type = type;
      document.head.appendChild(link);
    });
  }

  // ì½”ë“œ ìŠ¤í”Œë¦¬íŒ… ë° ë™ì  ì„í¬íŠ¸
  async loadComponent(componentName) {
    // ì»´í¬ë„ŒíŠ¸ë³„ ì²­í¬ ë¡œë”©
    const components = {
      'video-player': () => import('./components/VideoPlayer.js'),
      'chat-interface': () => import('./components/ChatInterface.js'),
      'trending-section': () => import('./components/TrendingSection.js'),
      'user-profile': () => import('./components/UserProfile.js')
    };

    if (components[componentName]) {
      try {
        const module = await components[componentName]();
        return module.default;
      } catch (error) {
        console.error(`Failed to load component: ${componentName}`, error);
        // í´ë°± ì»´í¬ë„ŒíŠ¸ ë°˜í™˜
        return this.getFallbackComponent(componentName);
      }
    }
  }

  // ëŸ°íƒ€ì„ ì„±ëŠ¥ ëª¨ë‹ˆí„°ë§
  measurePerformance() {
    // Core Web Vitals ì¸¡ì •
    if ('PerformanceObserver' in window) {
      // LCP (Largest Contentful Paint)
      new PerformanceObserver((entryList) => {
        const entries = entryList.getEntries();
        const lastEntry = entries[entries.length - 1];
        console.log('LCP:', lastEntry.startTime);
        this.sendMetric('lcp', lastEntry.startTime);
      }).observe({ entryTypes: ['largest-contentful-paint'] });

      // FID (First Input Delay)
      new PerformanceObserver((entryList) => {
        const firstInput = entryList.getEntries()[0];
        const fid = firstInput.processingStart - firstInput.startTime;
        console.log('FID:', fid);
        this.sendMetric('fid', fid);
      }).observe({ entryTypes: ['first-input'] });

      // CLS (Cumulative Layout Shift)
      let clsValue = 0;
      new PerformanceObserver((entryList) => {
        for (const entry of entryList.getEntries()) {
          if (!entry.hadRecentInput) {
            clsValue += entry.value;
          }
        }
        console.log('CLS:', clsValue);
        this.sendMetric('cls', clsValue);
      }).observe({ entryTypes: ['layout-shift'] });
    }
  }

  // ë©”ëª¨ë¦¬ ì‚¬ìš© ìµœì í™”
  optimizeMemoryUsage() {
    // ì‚¬ìš©í•˜ì§€ ì•ŠëŠ” DOM ë…¸ë“œ ì •ë¦¬
    const cleanup = () => {
      // ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆ ì •ë¦¬
      const oldNodes = document.querySelectorAll('[data-cleanup]');
      oldNodes.forEach(node => {
        node.remove();
      });

      // ìºì‹œëœ ë°ì´í„° ì •ë¦¬
      if (this.cache.size > 100) {
        const entries = Array.from(this.cache.entries());
        entries.sort((a, b) => a[1].lastAccessed - b[1].lastAccessed);

        // ì˜¤ë˜ëœ í•­ëª© 50ê°œ ì œê±°
        for (let i = 0; i < 50; i++) {
          this.cache.delete(entries[i][0]);
        }
      }
    };

    // í˜ì´ì§€ ì „í™˜ ì‹œ ì •ë¦¬
    document.addEventListener('visibilitychange', () => {
      if (document.hidden) {
        cleanup();
      }
    });
  }
}

```

### ìºì‹± ì „ëµ ìµœì í™”

### ë‹¤ì¸µ ìºì‹± êµ¬í˜„

```jsx
// ê³ ê¸‰ ìºì‹± ì‹œìŠ¤í…œ
class AdvancedCachingSystem {
  constructor() {
    this.layers = {
      memory: new Map(),
      indexedDB: null,
      cdn: {
        url: process.env.CDN_URL,
        purgeKey: process.env.CDN_PURGE_KEY
      }
    };

    this.strategies = {
      'cache-first': this.cacheFirst.bind(this),
      'network-first': this.networkFirst.bind(this),
      'stale-while-revalidate': this.staleWhileRevalidate.bind(this)
    };

    this.initializeIndexedDB();
  }

  // IndexedDB ì´ˆê¸°í™”
  async initializeIndexedDB() {
    const request = indexedDB.open('AppCache', 1);

    request.onsuccess = (event) => {
      this.layers.indexedDB = event.target.result;
    };

    request.onupgradeneeded = (event) => {
      const db = event.target.result;
      if (!db.objectStoreNames.contains('cache')) {
        db.createObjectStore('cache', { keyPath: 'key' });
      }
    };
  }

  // ìºì‹œ ì „ëµ: Cache First
  async cacheFirst(key, fetcher, options = {}) {
    // 1. ë©”ëª¨ë¦¬ ìºì‹œ í™•ì¸
    const memoryCache = this.layers.memory.get(key);
    if (memoryCache && !this.isExpired(memoryCache)) {
      return memoryCache.data;
    }

    // 2. IndexedDB í™•ì¸
    const dbCache = await this.getFromIndexedDB(key);
    if (dbCache && !this.isExpired(dbCache)) {
      // ë©”ëª¨ë¦¬ ìºì‹œì—ë„ ì €ì¥
      this.layers.memory.set(key, dbCache);
      return dbCache.data;
    }

    // 3. ë„¤íŠ¸ì›Œí¬ ìš”ì²­
    try {
      const data = await fetcher();
      await this.setCache(key, data, options.ttl);
      return data;
    } catch (error) {
      // 4. ë§Œë£Œëœ ìºì‹œë¼ë„ ë°˜í™˜
      if (memoryCache) return memoryCache.data;
      if (dbCache) return dbCache.data;
      throw error;
    }
  }

  // ìºì‹œ ë¬´íš¨í™” ì „ëµ
  async invalidateCache(pattern) {
    const invalidated = {
      memory: 0,
      indexedDB: 0,
      cdn: 0
    };

    // ë©”ëª¨ë¦¬ ìºì‹œ ë¬´íš¨í™”
    for (const [key, value] of this.layers.memory) {
      if (this.matchesPattern(key, pattern)) {
        this.layers.memory.delete(key);
        invalidated.memory++;
      }
    }

    // IndexedDB ë¬´íš¨í™”
    if (this.layers.indexedDB) {
      const tx = this.layers.indexedDB.transaction(['cache'], 'readwrite');
      const store = tx.objectStore('cache');
      const request = store.openCursor();

      request.onsuccess = (event) => {
        const cursor = event.target.result;
        if (cursor) {
          if (this.matchesPattern(cursor.value.key, pattern)) {
            cursor.delete();
            invalidated.indexedDB++;
          }
          cursor.continue();
        }
      };
    }

    // CDN ìºì‹œ í¼ì§€
    if (pattern.cdn) {
      await this.purgeCDN(pattern.cdn);
      invalidated.cdn++;
    }

    return invalidated;
  }

  // ìºì‹œ ì›Œë°
  async warmCache(keys) {
    const results = {
      success: 0,
      failed: 0,
      errors: []
    };

    const batchSize = 5;
    for (let i = 0; i < keys.length; i += batchSize) {
      const batch = keys.slice(i, i + batchSize);

      await Promise.all(batch.map(async ({ key, fetcher, ttl }) => {
        try {
          const data = await fetcher();
          await this.setCache(key, data, ttl);
          results.success++;
        } catch (error) {
          results.failed++;
          results.errors.push({ key, error: error.message });
        }
      }));

      // Rate limiting
      await new Promise(resolve => setTimeout(resolve, 100));
    }

    return results;
  }

  // ìºì‹œ í†µê³„
  getStatistics() {
    const stats = {
      memory: {
        size: this.layers.memory.size,
        bytes: this.calculateMemorySize(),
        hitRate: this.calculateHitRate('memory')
      },
      indexedDB: {
        size: 0, // IndexedDB í¬ê¸° ê³„ì‚°
        hitRate: this.calculateHitRate('indexedDB')
      },
      performance: {
        avgMemoryAccess: this.metrics.memoryAccess.average(),
        avgDBAccess: this.metrics.dbAccess.average(),
        avgNetworkFetch: this.metrics.networkFetch.average()
      }
    };

    return stats;
  }
}

```