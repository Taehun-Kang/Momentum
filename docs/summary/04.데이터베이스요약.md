# 4. 데이터베이스 설계 요약

> 상세 문서: [docs/basic/4.데이터베이스 설계 상세.md](../basic/4.데이터베이스%20설계%20상세.md)

## 핵심 테이블

### 사용자 관련
- `users`: 기본 사용자 정보
- `user_profiles`: 개인화 데이터 (선호도, 벡터)
- `user_search_patterns`: 검색 패턴 분석

### 영상 관련
- `cached_videos`: 캐시된 YouTube 영상
- `keyword_video_mappings`: 키워드-영상 매핑
- `video_quality_scores`: 영상 품질 점수

### 트렌드 관련
- `trending_keywords`: 트렌드 키워드
- `trend_predictions`: 트렌드 예측 (향후)

### 상호작용
- `video_interactions`: 시청 기록
- `search_sessions`: 검색 세션
- `user_feedback`: 좋아요/싫어요

## 중요 인덱스
```sql
-- 자주 사용되는 복합 인덱스
CREATE INDEX idx_user_recent_watch ON video_interactions(
  user_id, created_at DESC
) WHERE interaction_type = 'view';

CREATE INDEX idx_keyword_quality_videos ON keyword_video_mappings(
  keyword, relevance_score DESC
) WHERE relevance_score > 0.7;
```

## Supabase 특화 기능
- **RLS (Row Level Security)**: 사용자별 데이터 격리
- **Realtime**: trending_keywords 실시간 구독
- **Edge Functions**: 트렌드 업데이트 알림
- **자동 백업**: 일일 백업 설정 